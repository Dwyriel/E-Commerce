(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{"2MiI":function(t,i,e){"use strict";e.d(i,"a",function(){return a});var s=e("OGMK"),r=e("fXoL"),n=e("ofXK"),o=e("TEn/");function c(t,i){if(1&t&&(r.Rb(0,"ion-header",3),r.Rb(1,"ion-toolbar"),r.Rb(2,"ion-buttons",4),r.Nb(3,"ion-menu-button"),r.Qb(),r.Rb(4,"ion-title"),r.rc(5),r.Qb(),r.Qb(),r.Qb()),2&t){const t=r.bc();r.hc("translucent",!0),r.Bb(5),r.sc(t.title)}}function u(t,i){if(1&t&&(r.Rb(0,"ion-header",5),r.Rb(1,"ion-toolbar"),r.Rb(2,"ion-title",6),r.rc(3),r.Qb(),r.Qb(),r.Qb()),2&t){const t=r.bc();r.Bb(3),r.sc(t.title)}}function b(t,i){1&t&&r.Nb(0,"div",7)}let a=(()=>{class t{constructor(){this.title="",this.isMobile=!0}ngOnInit(){this.subscription&&!this.subscription.closed&&this.subscription.unsubscribe(),this.subscription=s.a.GetAppInfo().subscribe(t=>{this.isMobile=t.appWidth<=s.a.maxMobileWidth})}ngOnDestroy(){this.subscription&&!this.subscription.closed&&this.subscription.unsubscribe()}}return t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=r.Gb({type:t,selectors:[["app-header"]],inputs:{title:"title",segment:"segment"},decls:3,vars:3,consts:[[3,"translucent",4,"ngIf"],["collapse","condense",4,"ngIf"],["style","width: 100%; height: 65px;",4,"ngIf"],[3,"translucent"],["slot","start"],["collapse","condense"],["size","large"],[2,"width","100%","height","65px"]],template:function(t,i){1&t&&(r.qc(0,c,6,2,"ion-header",0),r.qc(1,u,4,1,"ion-header",1),r.qc(2,b,1,0,"div",2)),2&t&&(r.hc("ngIf",i.isMobile&&"0"==i.segment),r.Bb(1),r.hc("ngIf",i.isMobile&&"1"==i.segment),r.Bb(1),r.hc("ngIf",!i.isMobile&&"0"==i.segment))},directives:[n.k,o.o,o.T,o.f,o.B,o.S],styles:[""]}),t})()},dagM:function(t,i,e){"use strict";e.d(i,"a",function(){return u});var s=e("ofXK"),r=e("3Pt+"),n=e("tyNb"),o=e("TEn/"),c=e("fXoL");let u=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=c.Kb({type:t}),t.\u0275inj=c.Jb({imports:[[o.U,s.b,r.a,n.k]]}),t})()},tr9m:function(t,i,e){"use strict";e.r(i),e.d(i,"ProductListPageModule",function(){return P});var s=e("ofXK"),r=e("3Pt+"),n=e("TEn/"),o=e("tyNb"),c=e("mrSG"),u=e("OGMK"),b=e("PVVB"),a=e("fXoL"),l=e("Gdn9"),h=e("4kQV"),d=e("3LUQ"),p=e("2MiI");function g(t,i){if(1&t&&(a.Rb(0,"div",10),a.rc(1),a.Qb()),2&t){const t=a.bc();a.Bb(1),a.sc(t.title)}}function f(t,i){if(1&t){const t=a.Sb();a.Rb(0,"div",11),a.Rb(1,"ion-select",12),a.Zb("ngModelChange",function(i){return a.nc(t),a.bc().sorting=i})("ngModelChange",function(){return a.nc(t),a.bc().sortListing()}),a.Rb(2,"ion-select-option",13),a.rc(3,"Maior pre\xe7o"),a.Qb(),a.Rb(4,"ion-select-option",13),a.rc(5,"Menor pre\xe7o"),a.Qb(),a.Rb(6,"ion-select-option",13),a.rc(7,"Avalia\xe7\xe3o"),a.Qb(),a.Qb(),a.Qb()}if(2&t){const t=a.bc();a.Bb(1),a.hc("ngModel",t.sorting),a.Bb(1),a.hc("value",0),a.Bb(2),a.hc("value",1),a.Bb(2),a.hc("value",2)}}function v(t,i){1&t&&(a.Rb(0,"div",14),a.rc(1,"Nenhum item encontrado."),a.Qb())}function m(t,i){1&t&&(a.Rb(0,"span",17),a.rc(1,"Frete gr\xe1tis"),a.Qb())}function y(t,i){if(1&t&&(a.Rb(0,"ion-item",15),a.Nb(1,"img",16),a.Rb(2,"ion-label"),a.Rb(3,"h2"),a.rc(4),a.Rb(5,"span",17),a.rc(6),a.Qb(),a.Qb(),a.Rb(7,"h3"),a.Rb(8,"s"),a.rc(9),a.cc(10,"currency"),a.Qb(),a.qc(11,m,2,0,"span",18),a.Qb(),a.Rb(12,"h3"),a.rc(13),a.cc(14,"currency"),a.Qb(),a.Qb(),a.Qb()),2&t){const t=i.$implicit;a.jc("routerLink","/product/",t.id,""),a.Bb(1),a.hc("src",(null==t.gallery?null:t.gallery.length)>0?t.gallery[0]:"assets/sem-foto.png",a.oc)("alt",t.name),a.Bb(3),a.sc(t.name),a.Bb(2),a.tc("Avalia\xe7\xe3o: ",t.avgReview||0==t.avgReview?t.avgReview+"%":"Nenhum",""),a.Bb(3),a.sc(a.dc(10,8,t.price,"BRL")),a.Bb(2),a.hc("ngIf",.8*t.price>=50),a.Bb(2),a.tc("",a.dc(14,11,.8*t.price,"BRL")," \xe0 vista")}}const R=function(t){return{webrowser:t}},M=[{path:"",component:(()=>{class t{constructor(t,i,e,s,r){this.activatedRoute=t,this.productService=i,this.reviewService=e,this.router=s,this.alertService=r,this.searchInput=null,this.title="Produtos"}ngOnInit(){}ionViewWillEnter(){return Object(c.b)(this,void 0,void 0,function*(){this.GetPlataformInfo(),this.GetProducts()})}ionViewWillLeave(){this.subscription1&&!this.subscription1.closed&&this.subscription1.unsubscribe(),this.subscription2&&!this.subscription2.closed&&this.subscription2.unsubscribe(),this.subscription3&&!this.subscription3.closed&&this.subscription3.unsubscribe(),this.subscription4&&!this.subscription4.closed&&this.subscription4.unsubscribe()}GetPlataformInfo(){this.subscription3=u.a.GetAppInfo().subscribe(t=>{this.isMobile=t.appWidth<=u.a.maxMobileWidth,this.setDivWidth(.4*t.appWidth>u.a.maxMobileWidth/1.5?"40%":u.a.maxMobileWidth/1.5+"px")})}setDivWidth(t){document.body.style.setProperty("--maxWidth",t)}GetProducts(t=null){return Object(c.b)(this,void 0,void 0,function*(){yield this.alertService.presentLoading().then(t=>this.LoadingAlertID=t),this.searchInput=this.activatedRoute.snapshot.paramMap.get("search"),this.allFromCat=this.activatedRoute.snapshot.paramMap.get("cat"),this.categoryValue=parseInt(this.activatedRoute.snapshot.paramMap.get("value")),this.searchInput?this.GetProductsFromSearch(t):"all"!==this.allFromCat?"sub"!==this.allFromCat?yield this.GetAllProducts(t):yield this.GetProductsFromSubCat(t):this.GetProductsFromCat(t)})}GetProductsFromSearch(t=null){return Object(c.b)(this,void 0,void 0,function*(){this.title=`Busca: ${this.searchInput}`,this.subscription4&&!this.subscription4.closed&&this.subscription4.unsubscribe(),this.subscription4=(yield this.productService.GetBySearchFullString(this.searchInput)).subscribe(i=>Object(c.b)(this,void 0,void 0,function*(){this.products=i,yield this.FillProductAttributes(t)}))})}GetProductsFromCat(t=null){return Object(c.b)(this,void 0,void 0,function*(){b.a.CatsContains(this.categoryValue)&&(this.category=b.a.GetCatFromValue(this.categoryValue),this.title=`Categoria: ${this.category.title}`,this.products=yield this.productService.GetAllVerifiedFromCat(this.categoryValue),yield this.FillProductAttributes(t))})}GetProductsFromSubCat(t=null){return Object(c.b)(this,void 0,void 0,function*(){b.a.SubCatsContains(this.categoryValue)&&(this.subcategory=b.a.GetSubCatFromValue(this.categoryValue),this.title=`${this.subcategory.title} em ${b.a.GetCatFromValue(this.subcategory.category).title}`,this.subscription1&&!this.subscription1.closed&&this.subscription1.unsubscribe(),this.subscription1=(yield this.productService.GetAllVerifiedFromSubCat(this.categoryValue)).subscribe(i=>Object(c.b)(this,void 0,void 0,function*(){this.products=i,yield this.FillProductAttributes(t)})))})}GetAllProducts(t=null){return Object(c.b)(this,void 0,void 0,function*(){this.subscription2&&!this.subscription2.closed&&this.subscription2.unsubscribe(),this.subscription2=(yield this.productService.GetAllVerified()).subscribe(i=>Object(c.b)(this,void 0,void 0,function*(){this.title="Produtos",this.products=i,yield this.FillProductAttributes(t)}))})}FillProductAttributes(t){return Object(c.b)(this,void 0,void 0,function*(){var i=!0,e=[],s=0,r=this.products.length;for(var n of(i=this.products&&this.products.length>0,this.products)){var o=!0;for(n.fillSubCategory(),e.push((yield this.reviewService.GetAllFromProduct(n.id)).subscribe(t=>{n.reviews=t,n.reviews&&n.calculateAvgRating(),++s>=r&&(i=!1),o=!1},t=>Object(c.b)(this,void 0,void 0,function*(){o=!1,i=!1})));o;)yield new Promise(t=>setTimeout(t,10))}for(;i;)yield new Promise(t=>{console.log("here"),setTimeout(t,10)});for(var u of e)u.unsubscribe();t&&(yield t.target.complete()),yield this.alertService.dismissLoading(this.LoadingAlertID)})}RefreshContent(t){return Object(c.b)(this,void 0,void 0,function*(){yield this.GetProducts(t)})}sortListing(){switch(this.sorting){case 0:this.products.sort((t,i)=>i.price-t.price);break;case 1:this.products.sort((t,i)=>t.price-i.price);break;case 2:this.products.sort((t,i)=>i.avgReview-t.avgReview)}}}return t.\u0275fac=function(i){return new(i||t)(a.Mb(o.a),a.Mb(l.a),a.Mb(h.a),a.Mb(o.g),a.Mb(d.a))},t.\u0275cmp=a.Gb({type:t,selectors:[["app-product-list"]],decls:11,vars:10,consts:[["segment","0",3,"title"],[3,"fullscreen"],["segment","1",3,"title"],["slot","fixed",3,"ionRefresh"],["pullingIcon","bubbles","refreshingSpinner","bubbles"],[3,"ngClass"],["style","padding-bottom: .3rem;",4,"ngIf"],["style","width: 40%; margin-left: 58%; text-align: right;",4,"ngIf"],["style","text-align: center;",4,"ngIf"],["lines","inset",3,"routerLink",4,"ngFor","ngForOf"],[2,"padding-bottom",".3rem"],[2,"width","40%","margin-left","58%","text-align","right"],["name","sort","interface","popover","placeholder","Ordenar",3,"ngModel","ngModelChange"],[3,"value"],[2,"text-align","center"],["lines","inset",3,"routerLink"],[3,"src","alt"],[1,"ion-float-right",2,"font-size",".75rem"],["style","font-size: .75rem;","class","ion-float-right",4,"ngIf"]],template:function(t,i){1&t&&(a.Nb(0,"app-header",0),a.Rb(1,"ion-content",1),a.Nb(2,"app-header",2),a.Rb(3,"ion-refresher",3),a.Zb("ionRefresh",function(t){return i.RefreshContent(t)}),a.Nb(4,"ion-refresher-content",4),a.Qb(),a.Rb(5,"div",5),a.qc(6,g,2,1,"div",6),a.Rb(7,"ion-list"),a.qc(8,f,8,4,"div",7),a.qc(9,v,2,0,"div",8),a.qc(10,y,15,14,"ion-item",9),a.Qb(),a.Qb(),a.Qb()),2&t&&(a.hc("title",i.title),a.Bb(1),a.hc("fullscreen",!0),a.Bb(1),a.hc("title",i.title),a.Bb(3),a.hc("ngClass",a.kc(8,R,!i.isMobile)),a.Bb(1),a.hc("ngIf",!i.isMobile),a.Bb(2),a.hc("ngIf",i.products&&i.products.length>0),a.Bb(1),a.hc("ngIf",!i.products||i.products&&1>i.products.length),a.Bb(1),a.hc("ngForOf",i.products))},directives:[p.a,n.m,n.E,n.F,s.i,s.k,n.y,s.j,n.L,n.db,r.f,r.i,n.M,n.s,n.cb,o.h,n.x],pipes:[s.c],styles:["img[_ngcontent-%COMP%]{border-radius:10%;height:40px;width:40px;margin:0 7px 0 0}.webrowser[_ngcontent-%COMP%]{text-align:center;width:var(--maxWidth);margin:0 auto;padding-top:1rem}"]}),t})()}];let w=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=a.Kb({type:t}),t.\u0275inj=a.Jb({imports:[[o.k.forChild(M)],o.k]}),t})();var I=e("dagM");let P=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=a.Kb({type:t}),t.\u0275inj=a.Jb({imports:[[s.b,r.a,n.U,w,I.a]]}),t})()}}]);