(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{"2MiI":function(t,i,s){"use strict";s.d(i,"a",function(){return b});var e=s("OGMK"),n=s("fXoL"),r=s("ofXK"),c=s("TEn/");function o(t,i){if(1&t&&(n.Rb(0,"ion-header",3),n.Rb(1,"ion-toolbar"),n.Rb(2,"ion-buttons",4),n.Nb(3,"ion-menu-button"),n.Qb(),n.Rb(4,"ion-title"),n.qc(5),n.Qb(),n.Qb(),n.Qb()),2&t){const t=n.bc();n.gc("translucent",!0),n.Bb(5),n.rc(t.title)}}function a(t,i){if(1&t&&(n.Rb(0,"ion-header",5),n.Rb(1,"ion-toolbar"),n.Rb(2,"ion-title",6),n.qc(3),n.Qb(),n.Qb(),n.Qb()),2&t){const t=n.bc();n.Bb(3),n.rc(t.title)}}function u(t,i){1&t&&n.Nb(0,"div",7)}let b=(()=>{class t{constructor(){this.title="",this.isMobile=!0}ngOnInit(){this.subscription&&!this.subscription.closed&&this.subscription.unsubscribe(),this.subscription=e.a.GetAppInfo().subscribe(t=>{this.isMobile=t.appWidth<=e.a.maxMobileWidth})}ngOnDestroy(){this.subscription&&!this.subscription.closed&&this.subscription.unsubscribe()}}return t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=n.Gb({type:t,selectors:[["app-header"]],inputs:{title:"title",segment:"segment"},decls:3,vars:3,consts:[[3,"translucent",4,"ngIf"],["collapse","condense",4,"ngIf"],["style","width: 100%; height: 65px;",4,"ngIf"],[3,"translucent"],["slot","start"],["collapse","condense"],["size","large"],[2,"width","100%","height","65px"]],template:function(t,i){1&t&&(n.pc(0,o,6,2,"ion-header",0),n.pc(1,a,4,1,"ion-header",1),n.pc(2,u,1,0,"div",2)),2&t&&(n.gc("ngIf",i.isMobile&&"0"==i.segment),n.Bb(1),n.gc("ngIf",i.isMobile&&"1"==i.segment),n.Bb(1),n.gc("ngIf",!i.isMobile&&"0"==i.segment))},directives:[r.k,c.o,c.P,c.f,c.y,c.O],styles:[""]}),t})()},"Gc/U":function(t,i,s){"use strict";s.r(i),s.d(i,"PurchasesListPageModule",function(){return O});var e=s("ofXK"),n=s("3Pt+"),r=s("TEn/"),c=s("tyNb"),o=s("mrSG"),a=s("OGMK"),u=s("fcTE"),b=s("fXoL"),h=s("3LUQ"),l=s("xHty"),p=s("Gdn9"),d=s("2MiI");function g(t,i){if(1&t&&(b.Rb(0,"div"),b.Rb(1,"p",5),b.qc(2),b.Qb(),b.Qb()),2&t){const t=b.bc();b.Bb(2),b.sc("Nenhuma ",t.purchasePage?"compra":"venda"," realizada.")}}function f(t,i){if(1&t&&b.Nb(0,"img",9),2&t){const t=b.bc().$implicit;b.gc("src",t.exemploProduct.gallery[0],b.nc)("alt",t.exemploProduct.name)}}function m(t,i){if(1&t&&(b.Pb(0),b.Rb(1,"ion-item",7),b.pc(2,f,1,2,"img",8),b.Rb(3,"ion-label"),b.Rb(4,"h2"),b.qc(5),b.Qb(),b.Rb(6,"h3"),b.qc(7),b.Qb(),b.Qb(),b.Qb(),b.Ob()),2&t){const t=i.$implicit,s=b.bc(2);b.Bb(1),b.ic("routerLink","/purchase/",t.purchase.id,""),b.Bb(1),b.gc("ngIf",(null==t.exemploProduct.gallery?null:t.exemploProduct.gallery.length)>0),b.Bb(3),b.sc("Status: ",s.StateToString(t.purchase.state)," "),b.Bb(2),b.sc("Data: ",t.purchase.date.toLocaleString(),"")}}function v(t,i){if(1&t&&(b.Rb(0,"ion-list"),b.pc(1,m,8,4,"ng-container",6),b.Qb()),2&t){const t=b.bc();b.Bb(1),b.gc("ngForOf",t.purchasesObjs)}}const y=function(t){return{webrowser:t}},P=[{path:"",component:(()=>{class t{constructor(t,i,s,e,n){this.activatedRoute=t,this.alertService=i,this.purchaseService=s,this.router=e,this.productService=n,this.purchases=[],this.purchasesObjs=[],this.subscriptions=[]}ngOnInit(){this.GetPlataformInfo()}ionViewWillEnter(){return Object(o.b)(this,void 0,void 0,function*(){this.type=this.activatedRoute.snapshot.paramMap.get("type"),this.type?(this.purchasePage="purchases"==this.type,this.GetUserAndPurchases()):yield this.router.navigate(["/"])})}ionViewWillLeave(){if(this.purchases=[],this.user=null,this.purchasesObjs=[],this.subscription1&&!this.subscription1.closed&&this.subscription1.unsubscribe(),this.subscription2&&!this.subscription2.closed&&this.subscription2.unsubscribe(),this.subscription3&&!this.subscription3.closed&&this.subscription3.unsubscribe(),this.subscriptions&&this.subscriptions.length>0){for(var t of this.subscriptions)t&&!t.closed&&t.unsubscribe();this.subscriptions=[]}}GetPlataformInfo(){this.subscription1=a.a.GetAppInfo().subscribe(t=>{this.isMobile=t.appWidth<=a.a.maxMobileWidth,this.setDivWidth(.4*t.appWidth>a.a.maxMobileWidth/1.5?"40%":a.a.maxMobileWidth/1.5+"px")})}setDivWidth(t){document.body.style.setProperty("--maxWidth",t)}GetUserAndPurchases(){return Object(o.b)(this,void 0,void 0,function*(){yield this.alertService.presentLoading().then(t=>this.loadingAlertID=t),this.subscription2=a.a.GetUserInfo().subscribe(t=>Object(o.b)(this,void 0,void 0,function*(){if(!t)return yield this.router.navigate(["/login"]),void(yield this.alertService.dismissLoading(this.loadingAlertID));this.user=t,this.GetPurchases()}),t=>Object(o.b)(this,void 0,void 0,function*(){yield this.alertService.dismissLoading(this.loadingAlertID),yield this.alertService.presentAlert("Ops","Algo deu errado, tente novamente mais tarde.")}))})}GetPurchases(){return Object(o.b)(this,void 0,void 0,function*(){this.subscription3&&!this.subscription3.closed&&this.subscription3.unsubscribe(),this.subscription3=(yield this.purchasePage?this.purchaseService.GetAllFromUser(this.user.id):this.purchaseService.GetAllFromSeller(this.user.id)).subscribe(t=>Object(o.b)(this,void 0,void 0,function*(){if(!t||t.length<1)yield this.alertService.dismissLoading(this.loadingAlertID);else{if(this.subscriptions&&this.subscriptions.length>0){for(var i of this.subscriptions)i&&!i.closed&&i.unsubscribe();this.subscriptions=[]}this.hasPurchases=t&&t.length>0,this.purchases=this.hasPurchases?t:[];var s=[],e=!0,n=!0,r=0,c=this.purchases.length;for(var o of this.purchases)for(n=!0,this.subscriptions.push((yield this.productService.Get(o.item.productID)).subscribe(t=>{s.push({exemploProduct:t,purchase:o}),++r>=c&&(e=!1),n=!1}));n;)yield new Promise(t=>setTimeout(t,10));for(;e;)yield new Promise(t=>setTimeout(t,10));this.purchasesObjs=s,yield this.alertService.dismissLoading(this.loadingAlertID)}}),t=>Object(o.b)(this,void 0,void 0,function*(){yield this.alertService.dismissLoading(this.loadingAlertID),yield this.alertService.presentAlert("Ops","Algo deu errado, tente novamente mais tarde.")}))})}StateToString(t){return Object(u.d)(t)}}return t.\u0275fac=function(i){return new(i||t)(b.Mb(c.a),b.Mb(h.a),b.Mb(l.a),b.Mb(c.g),b.Mb(p.a))},t.\u0275cmp=b.Gb({type:t,selectors:[["app-purchases"]],decls:6,vars:6,consts:[["title","Compras","segment","0"],[3,"fullscreen"],["title","Compras","segment","1"],[3,"ngClass"],[4,"ngIf"],[1,"ion-text-center"],[4,"ngFor","ngForOf"],[3,"routerLink"],[3,"src","alt",4,"ngIf"],[3,"src","alt"]],template:function(t,i){1&t&&(b.Nb(0,"app-header",0),b.Rb(1,"ion-content",1),b.Nb(2,"app-header",2),b.Rb(3,"div",3),b.pc(4,g,3,1,"div",4),b.pc(5,v,2,1,"ion-list",4),b.Qb(),b.Qb()),2&t&&(b.Bb(1),b.gc("fullscreen",!0),b.Bb(2),b.gc("ngClass",b.jc(4,y,!i.isMobile)),b.Bb(1),b.gc("ngIf",!i.hasPurchases),b.Bb(1),b.gc("ngIf",i.hasPurchases))},directives:[d.a,r.m,e.i,e.k,r.v,e.j,r.s,r.Y,c.h,r.u],styles:[".webrowser[_ngcontent-%COMP%]{text-align:center;width:var(--maxWidth);margin:0 auto;padding-top:1rem}img[_ngcontent-%COMP%]{border-radius:10%;height:40px;width:40px;margin:0 7px 0 0}"]}),t})()}];let I=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=b.Kb({type:t}),t.\u0275inj=b.Jb({imports:[[c.k.forChild(P)],c.k]}),t})();var M=s("dagM");let O=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=b.Kb({type:t}),t.\u0275inj=b.Jb({imports:[[e.b,n.a,r.Q,I,M.a]]}),t})()},dagM:function(t,i,s){"use strict";s.d(i,"a",function(){return a});var e=s("ofXK"),n=s("3Pt+"),r=s("tyNb"),c=s("TEn/"),o=s("fXoL");let a=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=o.Kb({type:t}),t.\u0275inj=o.Jb({imports:[[c.Q,e.b,n.a,r.k]]}),t})()}}]);