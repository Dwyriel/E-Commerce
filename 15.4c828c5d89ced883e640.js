(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{"2MiI":function(i,t,e){"use strict";e.d(t,"a",function(){return l});var s=e("OGMK"),n=e("fXoL"),o=e("ofXK"),r=e("TEn/");function c(i,t){if(1&i&&(n.Rb(0,"ion-header",3),n.Rb(1,"ion-toolbar"),n.Rb(2,"ion-buttons",4),n.Nb(3,"ion-menu-button"),n.Qb(),n.Rb(4,"ion-title"),n.rc(5),n.Qb(),n.Qb(),n.Qb()),2&i){const i=n.bc();n.hc("translucent",!0),n.Bb(5),n.sc(i.title)}}function b(i,t){if(1&i&&(n.Rb(0,"ion-header",5),n.Rb(1,"ion-toolbar"),n.Rb(2,"ion-title",6),n.rc(3),n.Qb(),n.Qb(),n.Qb()),2&i){const i=n.bc();n.Bb(3),n.sc(i.title)}}function a(i,t){1&i&&n.Nb(0,"div",7)}let l=(()=>{class i{constructor(){this.title="",this.isMobile=!0}ngOnInit(){this.subscription&&!this.subscription.closed&&this.subscription.unsubscribe(),this.subscription=s.a.GetAppInfo().subscribe(i=>{this.isMobile=i.appWidth<=s.a.maxMobileWidth})}ngOnDestroy(){this.subscription&&!this.subscription.closed&&this.subscription.unsubscribe()}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=n.Gb({type:i,selectors:[["app-header"]],inputs:{title:"title",segment:"segment"},decls:3,vars:3,consts:[[3,"translucent",4,"ngIf"],["collapse","condense",4,"ngIf"],["style","width: 100%; height: 65px;",4,"ngIf"],[3,"translucent"],["slot","start"],["collapse","condense"],["size","large"],[2,"width","100%","height","65px"]],template:function(i,t){1&i&&(n.qc(0,c,6,2,"ion-header",0),n.qc(1,b,4,1,"ion-header",1),n.qc(2,a,1,0,"div",2)),2&i&&(n.hc("ngIf",t.isMobile&&"0"==t.segment),n.Bb(1),n.hc("ngIf",t.isMobile&&"1"==t.segment),n.Bb(1),n.hc("ngIf",!t.isMobile&&"0"==t.segment))},directives:[o.k,r.o,r.T,r.f,r.B,r.S],styles:[""]}),i})()},Qios:function(i,t,e){"use strict";e.r(t),e.d(t,"AdminUsersPageModule",function(){return C});var s=e("ofXK"),n=e("3Pt+"),o=e("TEn/"),r=e("tyNb"),c=e("mrSG"),b=e("CbRh"),a=e("fXoL"),l=e("xRcl"),u=e("7sqW");function d(i,t){if(1&i&&(a.Rb(0,"ion-item-group"),a.Rb(1,"ion-item"),a.Rb(2,"ion-label"),a.rc(3,"Estado:"),a.Qb(),a.Rb(4,"ion-text"),a.rc(5),a.Qb(),a.Qb(),a.Rb(6,"ion-item"),a.Rb(7,"ion-label"),a.rc(8,"Cidade:"),a.Qb(),a.Rb(9,"ion-text"),a.rc(10),a.Qb(),a.Qb(),a.Rb(11,"ion-item"),a.Rb(12,"ion-label"),a.rc(13,"CEP: "),a.Qb(),a.Rb(14,"ion-text"),a.rc(15),a.Qb(),a.Qb(),a.Rb(16,"ion-item"),a.Rb(17,"ion-label"),a.rc(18,"Rua:"),a.Qb(),a.Rb(19,"ion-text"),a.rc(20),a.Qb(),a.Qb(),a.Qb()),2&i){const i=a.bc();a.Bb(5),a.sc(i.user.address.state),a.Bb(5),a.sc(i.user.address.city),a.Bb(5),a.sc(i.user.address.cep),a.Bb(5),a.uc("",i.user.address.street,", ",i.user.address.number,"")}}function h(i,t){1&i&&(a.Rb(0,"ion-item-group"),a.Rb(1,"ion-item"),a.Rb(2,"ion-label"),a.rc(3,"Estado:"),a.Qb(),a.Nb(4,"ion-text"),a.Qb(),a.Rb(5,"ion-item"),a.Rb(6,"ion-label"),a.rc(7,"Cidade:"),a.Qb(),a.Nb(8,"ion-text"),a.Qb(),a.Rb(9,"ion-item"),a.Rb(10,"ion-label"),a.rc(11,"CEP: "),a.Qb(),a.Nb(12,"ion-text"),a.Qb(),a.Rb(13,"ion-item"),a.Rb(14,"ion-label"),a.rc(15,"Rua:"),a.Qb(),a.Nb(16,"ion-text"),a.Qb(),a.Qb())}let g=(()=>{class i{constructor(i,t){this.AddressService=i,this.ratingService=t,this.user=new b.a,this.loading=!0}ngOnInit(){}ionViewWillEnter(){return Object(c.b)(this,void 0,void 0,function*(){this.telephone=this.GetUITel(this.user.tel),this.user.addressId?this.subscription1=(yield this.AddressService.Get(this.user.addressId)).subscribe(i=>{this.user.address=i,this.loading=!1},i=>{this.loading=!1}):this.loading=!1,this.subscription2=(yield this.ratingService.GetAllFromUser(this.user.id)).subscribe(i=>{this.user.ratings=i,this.user.calculateAvgRating()})})}ionViewWillLeave(){this.loading=!0,this.user=new b.a,this.subscription1&&!this.subscription1.closed&&this.subscription1.unsubscribe(),this.subscription2&&!this.subscription2.closed&&this.subscription2.unsubscribe()}GetUITel(i){var t,e,s=i.substring(0,2),n=i.substring(2),o=n.length;return 9===o&&(t=n.substring(0,5),e=n.substring(5)),8===o&&(t=n.substring(0,4),e=n.substring(4)),`(${s}) ${t}-${e}`}}return i.\u0275fac=function(t){return new(t||i)(a.Mb(l.a),a.Mb(u.a))},i.\u0275cmp=a.Gb({type:i,selectors:[["app-user"]],inputs:{user:"user"},decls:25,vars:7,consts:[[3,"src"],[4,"ngIf"]],template:function(i,t){1&i&&(a.Rb(0,"ion-list"),a.Rb(1,"ion-item"),a.Nb(2,"img",0),a.Qb(),a.Rb(3,"ion-item"),a.Rb(4,"ion-label"),a.rc(5,"Nome"),a.Qb(),a.Rb(6,"ion-text"),a.rc(7),a.Qb(),a.Qb(),a.Rb(8,"ion-item"),a.Rb(9,"ion-label"),a.rc(10,"E-mail"),a.Qb(),a.Rb(11,"ion-text"),a.rc(12),a.Qb(),a.Qb(),a.Rb(13,"ion-item"),a.Rb(14,"ion-label"),a.rc(15,"Tel"),a.Qb(),a.Rb(16,"ion-text"),a.rc(17),a.Qb(),a.Qb(),a.Rb(18,"ion-item"),a.Rb(19,"ion-label"),a.rc(20,"Avalia\xe7\xe3o"),a.Qb(),a.Rb(21,"ion-text"),a.rc(22),a.Qb(),a.Qb(),a.qc(23,d,21,5,"ion-item-group",1),a.qc(24,h,17,0,"ion-item-group",1),a.Qb()),2&i&&(a.Bb(2),a.hc("src",t.user.photo?t.user.photo:"assets/perfil.png",a.oc),a.Bb(5),a.sc(t.user.name),a.Bb(5),a.sc(t.user.email),a.Bb(5),a.sc(t.telephone),a.Bb(5),a.sc(t.user.avgRating||0==t.user.avgRating?t.user.avgRating+"%":"Nenhum"),a.Bb(1),a.hc("ngIf",t.user.addressId&&t.user.address),a.Bb(1),a.hc("ngIf",t.loading))},directives:[o.y,o.s,o.x,o.Q,s.k,o.t],styles:["img[_ngcontent-%COMP%]{border-radius:50%;height:120px;width:120px;margin:5px auto 15px}"]}),i})();var p=e("OGMK"),v=e("3LUQ"),m=e("qfBg"),f=e("2MiI");function R(i,t){1&i&&(a.Rb(0,"div",8),a.rc(1,"ADM - Usu\xe1rios"),a.Qb())}function Q(i,t){if(1&i){const i=a.Sb();a.Rb(0,"ion-row",9),a.Rb(1,"ion-col",10),a.Rb(2,"ion-searchbar",11),a.Zb("ionInput",function(t){return a.nc(i),a.bc().HandleSearchbarInput(t)}),a.Qb(),a.Qb(),a.Rb(3,"ion-col",12),a.Rb(4,"ion-select",13),a.Zb("ngModelChange",function(t){return a.nc(i),a.bc().sorting=t})("ngModelChange",function(){return a.nc(i),a.bc().sortListing()}),a.Rb(5,"ion-select-option",14),a.rc(6,"Todos"),a.Qb(),a.Rb(7,"ion-select-option",14),a.rc(8,"Ativos"),a.Qb(),a.Rb(9,"ion-select-option",14),a.rc(10,"Desativos"),a.Qb(),a.Qb(),a.Qb(),a.Qb()}if(2&i){const i=a.bc();a.Bb(4),a.hc("ngModel",i.sorting),a.Bb(1),a.hc("value",0),a.Bb(2),a.hc("value",1),a.Bb(2),a.hc("value",2)}}function y(i,t){1&i&&(a.Rb(0,"div",15),a.rc(1,"Nenhum item encontrado."),a.Qb())}function I(i,t){if(1&i){const i=a.Sb();a.Rb(0,"ion-item-options",24),a.Rb(1,"ion-item-option",25),a.Zb("click",function(){a.nc(i);const t=a.bc(2).$implicit;return a.bc().ChangeType(t.user)}),a.Rb(2,"span",26),a.rc(3,"Privil\xe9gio"),a.Qb(),a.Qb(),a.Qb()}}function w(i,t){if(1&i){const i=a.Sb();a.Rb(0,"ion-item",27),a.Zb("click",function(t){a.nc(i);const e=a.bc(2).$implicit;return a.bc().ChangeActive(e.user),t.stopPropagation()}),a.Rb(1,"span"),a.rc(2),a.Qb(),a.Qb()}if(2&i){const i=a.bc(2).$implicit;a.Bb(2),a.sc(i.user.active?"Desativar":"Ativar")}}function S(i,t){if(1&i){const i=a.Sb();a.Rb(0,"ion-item",28),a.Zb("click",function(t){a.nc(i);const e=a.bc(2).$implicit;return a.bc().ChangeType(e.user),t.stopPropagation()}),a.Rb(1,"span"),a.rc(2,"Privil\xe9gio"),a.Qb(),a.Qb()}}function A(i,t){if(1&i){const i=a.Sb();a.Rb(0,"ion-item-options",29),a.Rb(1,"ion-item-option",25),a.Zb("click",function(){a.nc(i);const t=a.bc(2).$implicit;return a.bc().ChangeActive(t.user)}),a.Rb(2,"span",30),a.rc(3),a.Qb(),a.Qb(),a.Qb()}if(2&i){const i=a.bc(2).$implicit;a.Bb(3),a.sc(i.user.active?"Desativar":"Ativar")}}function M(i,t){if(1&i){const i=a.Sb();a.Pb(0),a.qc(1,I,4,0,"ion-item-options",17),a.Rb(2,"ion-item",18),a.Zb("click",function(){a.nc(i);const t=a.bc().$implicit;return a.bc().ShowUser(t.user)}),a.Nb(3,"img",19),a.Rb(4,"ion-label"),a.Rb(5,"h2"),a.rc(6),a.Rb(7,"span",20),a.rc(8),a.Qb(),a.Qb(),a.Rb(9,"h3"),a.rc(10),a.Rb(11,"span",20),a.rc(12),a.Qb(),a.Qb(),a.Qb(),a.qc(13,w,3,1,"ion-item",21),a.qc(14,S,3,0,"ion-item",22),a.Qb(),a.qc(15,A,4,1,"ion-item-options",23),a.Ob()}if(2&i){const i=a.bc().$implicit,t=a.bc();a.Bb(1),a.hc("ngIf",t.isMobile),a.Bb(2),a.hc("src",i.user.photo?i.user.photo:"assets/perfil.png",a.oc)("alt",i.user.name),a.Bb(3),a.sc(i.user.name),a.Bb(2),a.tc("Status: ",i.user.active?"Ativo":"Desativo",""),a.Bb(2),a.sc(i.user.email),a.Bb(2),a.tc("Privil\xe9gio: ",0==i.user.userType?"Admin":"Usu\xe1rio",""),a.Bb(1),a.hc("ngIf",!t.isMobile),a.Bb(1),a.hc("ngIf",!t.isMobile),a.Bb(1),a.hc("ngIf",t.isMobile)}}function B(i,t){if(1&i&&(a.Rb(0,"ion-item-sliding"),a.qc(1,M,16,10,"ng-container",16),a.Qb()),2&i){const i=t.$implicit;a.Bb(1),a.hc("ngIf",i.shouldShow)}}const x=function(i){return{webrowser:i}},O=[{path:"",component:(()=>{class i{constructor(i,t,e,s){this.alertService=i,this.router=t,this.userService=e,this.popoverController=s,this.isLoading=!0,this.cachedUsers=[],this.users=[],this.sorting=0}ngOnInit(){}ionViewWillEnter(){return Object(c.b)(this,void 0,void 0,function*(){this.isLoading=!0,this.GetPlataformInfo(),this.GetUser()})}ionViewWillLeave(){this.user=null,this.users=[],this.cachedUsers=[],this.sorting=0,this.subscription1&&!this.subscription1.closed&&this.subscription1.unsubscribe(),this.subscription2&&!this.subscription2.closed&&this.subscription2.unsubscribe(),this.subscription3&&!this.subscription3.closed&&this.subscription3.unsubscribe()}GetPlataformInfo(){this.subscription1=p.a.GetAppInfo().subscribe(i=>{this.isMobile=i.appWidth<=p.a.maxMobileWidth,this.setDivWidth(.4*i.appWidth>p.a.maxMobileWidth/1.5?"40%":p.a.maxMobileWidth/1.5+"px")})}setDivWidth(i){document.body.style.setProperty("--maxWidth",i)}GetUser(){return Object(c.b)(this,void 0,void 0,function*(){yield this.alertService.presentLoading().then(i=>this.loadingAlertID=i),this.subscription2=p.a.GetUserInfo().subscribe(i=>Object(c.b)(this,void 0,void 0,function*(){return i?i.userType!=b.b.Admin?(yield this.router.navigate(["/"]),void(yield this.alertService.dismissLoading(this.loadingAlertID))):(this.user=i,void this.GetUsers()):(yield this.router.navigate(["/login"]),void(yield this.alertService.dismissLoading(this.loadingAlertID)))}),i=>Object(c.b)(this,void 0,void 0,function*(){yield this.alertService.dismissLoading(this.loadingAlertID),yield this.alertService.presentAlert("Ops","Algo deu errado, tente novamente mais tarde.")}))})}GetUsers(){return Object(c.b)(this,void 0,void 0,function*(){this.subscription3&&!this.subscription3.closed&&this.subscription3.unsubscribe(),this.subscription3=(yield this.userService.GetAll()).subscribe(i=>Object(c.b)(this,void 0,void 0,function*(){this.cachedUsers=i,this.sortListing(),this.isLoading&&(this.isLoading=!1,yield this.alertService.dismissLoading(this.loadingAlertID))}),i=>Object(c.b)(this,void 0,void 0,function*(){yield this.alertService.dismissLoading(this.loadingAlertID),yield this.alertService.presentAlert("Ops","Algo deu errado, tente novamente mais tarde.")}))})}ShowUser(i){return Object(c.b)(this,void 0,void 0,function*(){var t=yield this.popoverController.create({component:g,mode:"md",componentProps:{user:i},animated:!0});yield t.present()})}ChangeActive(i){return Object(c.b)(this,void 0,void 0,function*(){var t;yield this.alertService.confirmationAlert(i.active?"Desativar":"Ativar",`Deseja realmente ${i.active?"desativar":"ativar"} esse usuario?`).then(i=>t=i),t&&(yield this.alertService.presentLoading().then(i=>this.loadingAlertID=i),this.userService.UpdateActive(i.id,!i.active).then(()=>Object(c.b)(this,void 0,void 0,function*(){yield this.alertService.ShowToast("Usu\xe1rio foi "+(i.active?"desativado":"ativado"))})).catch(i=>Object(c.b)(this,void 0,void 0,function*(){yield this.alertService.ShowToast("Ocorreu um erro, tente novamente")})).finally(()=>Object(c.b)(this,void 0,void 0,function*(){yield this.alertService.dismissLoading(this.loadingAlertID)})))})}ChangeType(i){return Object(c.b)(this,void 0,void 0,function*(){var t;yield this.alertService.confirmationAlert("Privil\xe9gio",`Deseja realmente mudar os privil\xe9gios desse usuario para ${i.userType==b.b.Admin?"'Usu\xe1rio'":"'Admin'"}?`).then(i=>t=i),t&&(yield this.alertService.presentLoading().then(i=>this.loadingAlertID=i),this.userService.UpdateType(i.id,i.userType==b.b.Admin?b.b.User:b.b.Admin).then(()=>Object(c.b)(this,void 0,void 0,function*(){yield this.alertService.ShowToast("Privil\xe9gio alterado para "+(i.userType==b.b.Admin?"'Usu\xe1rio'":"'Admin'"))})).catch(i=>Object(c.b)(this,void 0,void 0,function*(){yield this.alertService.ShowToast("Ocorreu um erro, tente novamente")})).finally(()=>Object(c.b)(this,void 0,void 0,function*(){yield this.alertService.dismissLoading(this.loadingAlertID)})))})}HandleSearchbarInput(i){var t=i.target.value.toLowerCase();for(let e of this.users)e.shouldShow=e.user.name.toLowerCase().includes(t)}sortListing(){switch(this.users=[],this.sorting){case 0:this.cachedUsers.forEach(i=>{this.users.push({user:i,shouldShow:!0})});break;case 1:for(let i of this.cachedUsers)i.active&&this.users.push({user:i,shouldShow:!0});break;case 2:for(let i of this.cachedUsers)i.active||this.users.push({user:i,shouldShow:!0})}}}return i.\u0275fac=function(t){return new(t||i)(a.Mb(v.a),a.Mb(r.g),a.Mb(m.a),a.Mb(o.bb))},i.\u0275cmp=a.Gb({type:i,selectors:[["app-admin-users"]],decls:9,vars:8,consts:[["title","ADM - Usu\xe1rios","segment","0"],[3,"fullscreen"],["title","ADM - Usu\xe1rios","segment","1"],[3,"ngClass"],["style","padding-bottom: .3rem;",4,"ngIf"],["class","ion-align-items-center",4,"ngIf"],["style","text-align: center;",4,"ngIf"],[4,"ngFor","ngForOf"],[2,"padding-bottom",".3rem"],[1,"ion-align-items-center"],["size","9",2,"text-align","left"],["placeholder","Procurar",3,"ionInput"],[2,"text-align","right"],["name","sort","interface","popover","placeholder","Ordenar","value","0",3,"ngModel","ngModelChange"],[3,"value"],[2,"text-align","center"],[4,"ngIf"],["side","start",4,"ngIf"],["lines","inset","button","",3,"click"],[3,"src","alt"],[1,"ion-float-right",2,"font-size",".75rem"],["button","","color","warning","class","ion-margin",3,"click",4,"ngIf"],["button","","color","warning",3,"click",4,"ngIf"],["side","end",4,"ngIf"],["side","start"],["color","warning",3,"click"],["id","optionLeft"],["button","","color","warning",1,"ion-margin",3,"click"],["button","","color","warning",3,"click"],["side","end"],["id","optionRight"]],template:function(i,t){1&i&&(a.Nb(0,"app-header",0),a.Rb(1,"ion-content",1),a.Nb(2,"app-header",2),a.Rb(3,"div",3),a.qc(4,R,2,0,"div",4),a.Rb(5,"ion-list"),a.qc(6,Q,11,4,"ion-row",5),a.qc(7,y,2,0,"div",6),a.qc(8,B,2,1,"ion-item-sliding",7),a.Qb(),a.Qb(),a.Qb()),2&i&&(a.Bb(1),a.hc("fullscreen",!0),a.Bb(2),a.hc("ngClass",a.kc(6,x,!t.isMobile)),a.Bb(1),a.hc("ngIf",!t.isMobile),a.Bb(2),a.hc("ngIf",t.cachedUsers&&t.cachedUsers.length>0),a.Bb(1),a.hc("ngIf",!t.users||t.users&&1>t.users.length),a.Bb(1),a.hc("ngForOf",t.users))},directives:[f.a,o.m,s.i,s.k,o.y,s.j,o.H,o.l,o.I,o.eb,o.L,o.db,n.f,n.i,o.M,o.w,o.s,o.x,o.v,o.u],styles:["img[_ngcontent-%COMP%]{border-radius:50%;height:40px;width:40px;margin:0 7px 0 0}.webrowser[_ngcontent-%COMP%]{text-align:center;width:var(--maxWidth);margin:0 auto;padding-top:1rem}#optionRight[_ngcontent-%COMP%]{margin:0 .9rem 0 1rem}#optionLeft[_ngcontent-%COMP%]{margin:0 1rem 0 .9rem}"]}),i})()}];let U=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=a.Kb({type:i}),i.\u0275inj=a.Jb({imports:[[r.k.forChild(O)],r.k]}),i})();var L=e("dagM");let C=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=a.Kb({type:i}),i.\u0275inj=a.Jb({imports:[[s.b,n.a,o.U,U,L.a]]}),i})()},dagM:function(i,t,e){"use strict";e.d(t,"a",function(){return b});var s=e("ofXK"),n=e("3Pt+"),o=e("tyNb"),r=e("TEn/"),c=e("fXoL");let b=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=c.Kb({type:i}),i.\u0275inj=c.Jb({imports:[[r.U,s.b,n.a,o.k]]}),i})()}}]);