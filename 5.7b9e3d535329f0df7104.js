(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{"/O0G":function(i,t,s){"use strict";s.r(t),s.d(t,"ProfilePageModule",function(){return L});var e=s("ofXK"),n=s("3Pt+"),o=s("TEn/"),r=s("tyNb"),c=s("mrSG"),b=s("OGMK"),d=s("CbRh"),u=s("fXoL"),a=s("qfBg"),l=s("mnRn"),h=s("3LUQ"),g=s("xRcl"),p=s("7sqW"),f=s("2MiI");function v(i,t){if(1&i&&u.Nb(0,"img",9),2&i){const i=u.bc();u.hc("src",i.user.photo,u.oc)}}function m(i,t){if(1&i){const i=u.Sb();u.Rb(0,"img",10),u.Zb("click",function(){return u.nc(i),u.bc().alterPhoto()}),u.Qb()}if(2&i){const i=u.bc();u.hc("src",i.user.photo,u.oc)}}function R(i,t){1&i&&u.Nb(0,"img",11)}function y(i,t){if(1&i){const i=u.Sb();u.Rb(0,"img",12),u.Zb("click",function(){return u.nc(i),u.bc().alterPhoto()}),u.Qb()}}function I(i,t){1&i&&(u.Rb(0,"ion-row"),u.Rb(1,"ion-col",13),u.rc(2,"Conta Desativada"),u.Qb(),u.Qb())}function Q(i,t){if(1&i&&(u.Rb(0,"ion-item-group"),u.Rb(1,"ion-item"),u.Rb(2,"ion-label"),u.rc(3,"Estado:"),u.Qb(),u.Rb(4,"ion-text"),u.rc(5),u.Qb(),u.Qb(),u.Rb(6,"ion-item"),u.Rb(7,"ion-label"),u.rc(8,"Cidade:"),u.Qb(),u.Rb(9,"ion-text"),u.rc(10),u.Qb(),u.Qb(),u.Rb(11,"ion-item"),u.Rb(12,"ion-label"),u.rc(13,"CEP: "),u.Qb(),u.Rb(14,"ion-text"),u.rc(15),u.Qb(),u.Qb(),u.Rb(16,"ion-item"),u.Rb(17,"ion-label"),u.rc(18,"Rua:"),u.Qb(),u.Rb(19,"ion-text"),u.rc(20),u.Qb(),u.Qb(),u.Qb()),2&i){const i=u.bc();u.Bb(5),u.sc(i.user.address.state),u.Bb(5),u.sc(i.user.address.city),u.Bb(5),u.sc(i.user.address.cep),u.Bb(5),u.uc("",i.user.address.street,", ",i.user.address.number,"")}}function U(i,t){1&i&&(u.Rb(0,"span"),u.rc(1,"Adicionar endere\xe7o"),u.Qb())}function w(i,t){1&i&&(u.Rb(0,"span"),u.rc(1,"Atualizar endere\xe7o"),u.Qb())}function x(i,t){1&i&&(u.Rb(0,"ion-button",17),u.rc(1,"Editar Conta"),u.Qb())}function B(i,t){if(1&i){const i=u.Sb();u.Rb(0,"ion-button",18),u.Zb("click",function(){return u.nc(i),u.bc(2).logout()}),u.rc(1,"Logout"),u.Qb()}}function S(i,t){if(1&i&&(u.Rb(0,"div"),u.Rb(1,"ion-button",14),u.qc(2,U,2,0,"span",8),u.qc(3,w,2,0,"span",8),u.Qb(),u.qc(4,x,2,0,"ion-button",15),u.qc(5,B,2,0,"ion-button",16),u.Qb()),2&i){const i=u.bc();u.Bb(2),u.hc("ngIf",!i.user.address&&(!i.id||i.loggedUser&&i.id==i.loggedUser.id)),u.Bb(1),u.hc("ngIf",i.user.address&&(!i.id||i.loggedUser&&i.id==i.loggedUser.id)),u.Bb(1),u.hc("ngIf",!i.id||i.loggedUser&&i.id==i.loggedUser.id),u.Bb(1),u.hc("ngIf",!i.id||i.loggedUser&&i.id==i.loggedUser.id)}}const P=function(i){return{webrowser:i}},k=[{path:"",component:(()=>{class i{constructor(i,t,s,e,n,o,r){this.activatedRoute=i,this.userService=t,this.imageService=s,this.router=e,this.alertService=n,this.addressService=o,this.ratingService=r,this.title="Perfil",this.user=new d.b,this.loggedUser=null,this.telephone="",this.showButtons=!1}ngOnInit(){}ionViewWillEnter(){return Object(c.b)(this,void 0,void 0,function*(){yield this.getUser(),this.GetPlataformInfo()})}ionViewWillLeave(){this.user=new d.b,this.loggedUser=null,this.telephone="",this.showButtons=!1,this.id=null,this.subscription1&&!this.subscription1.closed&&this.subscription1.unsubscribe(),this.subscription2&&!this.subscription2.closed&&this.subscription2.unsubscribe(),this.subscription3&&!this.subscription3.closed&&this.subscription3.unsubscribe(),this.subscription4&&!this.subscription4.closed&&this.subscription4.unsubscribe(),this.subscription5&&!this.subscription5.closed&&this.subscription5.unsubscribe(),this.subscription6&&!this.subscription6.closed&&this.subscription6.unsubscribe(),this.subscription7&&!this.subscription7.closed&&this.subscription7.unsubscribe()}GetPlataformInfo(){this.subscription5=b.a.GetAppInfo().subscribe(i=>{this.isMobile=i.appWidth<=b.a.maxMobileWidth,this.setDivWidth(.4*i.appWidth>b.a.maxMobileWidth/1.5?"40%":b.a.maxMobileWidth/1.5+"px")})}setDivWidth(i){document.body.style.setProperty("--maxWidth",i)}getUser(){return Object(c.b)(this,void 0,void 0,function*(){var i=!0,t=!0;if(yield this.alertService.presentLoading().then(i=>this.loadingPopupID=i),this.id=this.activatedRoute.snapshot.paramMap.get("id"),this.id&&(this.subscription1=(yield this.userService.Get(this.id)).subscribe(s=>Object(c.b)(this,void 0,void 0,function*(){this.user=s,this.user.calculateAvgRating=(new d.b).calculateAvgRating,this.telephone=this.GetUITel(s.tel),this.title=`Perfil de ${s.name}`,s.addressId?(this.subscription2&&!this.subscription2.closed&&this.subscription2.unsubscribe(),this.subscription2=(yield this.addressService.Get(s.addressId)).subscribe(t=>Object(c.b)(this,void 0,void 0,function*(){this.user.address=t,i=!1}),t=>i=!1)):i=!1,this.subscription6&&!this.subscription6.closed&&this.subscription6.unsubscribe(),this.subscription6=(yield this.ratingService.GetAllFromUser(this.id)).subscribe(i=>{this.user.ratings=i,this.user.calculateAvgRating(),t=!1},i=>t=!1)}),t=>Object(c.b)(this,void 0,void 0,function*(){i=!1}))),this.id)for(;i&&t;)yield new Promise(i=>setTimeout(i,10));this.subscription3=b.a.GetUserInfo().subscribe(i=>Object(c.b)(this,void 0,void 0,function*(){i&&(this.loggedUser=i,this.loggedUser.id=i.id,this.id||(this.user=i,this.user.calculateAvgRating=(new d.b).calculateAvgRating,this.title=`Perfil de ${i.name}`,this.telephone=this.GetUITel(i.tel),i.addressId&&(this.subscription4&&!this.subscription4.closed&&this.subscription4.unsubscribe(),this.subscription4=(yield this.addressService.Get(i.addressId)).subscribe(i=>this.user.address=i)),this.subscription7&&!this.subscription7.closed&&this.subscription7.unsubscribe(),this.subscription7=(yield this.ratingService.GetAllFromUser(i.id)).subscribe(i=>{this.user.ratings=i,this.user.calculateAvgRating()})),yield this.alertService.dismissLoading(this.loadingPopupID)),this.id||i||(yield this.alertService.dismissLoading(this.loadingPopupID),yield this.router.navigate(["/"])),this.id&&!i&&(yield this.alertService.dismissLoading(this.loadingPopupID)),this.showButtons=!(this.id&&(!this.loggedUser||this.id!=this.loggedUser.id))}),i=>Object(c.b)(this,void 0,void 0,function*(){yield this.alertService.dismissLoading(this.loadingPopupID),this.loggedUser=null,this.id||(yield this.router.navigate(["/"]))}))})}alterPhoto(){return Object(c.b)(this,void 0,void 0,function*(){yield this.imageService.getImage().then(i=>Object(c.b)(this,void 0,void 0,function*(){yield this.alertService.presentLoading().then(i=>this.loadingPopupID=i),i?yield this.userService.UpdatePhoto(this.user.id,i).then(()=>Object(c.b)(this,void 0,void 0,function*(){this.user.photo=i,yield this.alertService.dismissLoading(this.loadingPopupID)})):yield this.alertService.dismissLoading(this.loadingPopupID)}))})}logout(){return Object(c.b)(this,void 0,void 0,function*(){yield this.alertService.presentLoading(),yield this.userService.auth.signOut().then(()=>Object(c.b)(this,void 0,void 0,function*(){yield this.alertService.dismissLoading(),yield this.router.navigate(["/"])}))})}GetUITel(i){var t,s,e=i.substring(0,2),n=i.substring(2),o=n.length;return 9===o&&(t=n.substring(0,5),s=n.substring(5)),8===o&&(t=n.substring(0,4),s=n.substring(4)),`(${e}) ${t}-${s}`}}return i.\u0275fac=function(t){return new(t||i)(u.Mb(r.a),u.Mb(a.a),u.Mb(l.a),u.Mb(r.g),u.Mb(h.a),u.Mb(g.a),u.Mb(p.a))},i.\u0275cmp=u.Gb({type:i,selectors:[["app-profile"]],decls:33,vars:17,consts:[["segment","0",3,"title"],[3,"fullscreen"],["segment","1",3,"title"],[3,"ngClass"],[3,"src",4,"ngIf"],[3,"src","click",4,"ngIf"],["src","assets/perfil.png",4,"ngIf"],["src","assets/perfil.png",3,"click",4,"ngIf"],[4,"ngIf"],[3,"src"],[3,"src","click"],["src","assets/perfil.png"],["src","assets/perfil.png",3,"click"],[1,"ion-text-center",2,"color","red"],["type","button","color","primary","expand","block","routerLink","/addressForm",1,"ion-margin"],["type","button","color","primary","expand","block","routerLink","/account","class","ion-margin",4,"ngIf"],["type","button","color","secondary","expand","block","class","ion-margin",3,"click",4,"ngIf"],["type","button","color","primary","expand","block","routerLink","/account",1,"ion-margin"],["type","button","color","secondary","expand","block",1,"ion-margin",3,"click"]],template:function(i,t){1&i&&(u.Nb(0,"app-header",0),u.Rb(1,"ion-content",1),u.Nb(2,"app-header",2),u.Rb(3,"div",3),u.Rb(4,"ion-list"),u.Rb(5,"ion-item"),u.qc(6,v,1,1,"img",4),u.qc(7,m,1,1,"img",5),u.qc(8,R,1,0,"img",6),u.qc(9,y,1,0,"img",7),u.Qb(),u.qc(10,I,3,0,"ion-row",8),u.Rb(11,"ion-item"),u.Rb(12,"ion-label"),u.rc(13,"Nome"),u.Qb(),u.Rb(14,"ion-text"),u.rc(15),u.Qb(),u.Qb(),u.Rb(16,"ion-item"),u.Rb(17,"ion-label"),u.rc(18,"E-mail"),u.Qb(),u.Rb(19,"ion-text"),u.rc(20),u.Qb(),u.Qb(),u.Rb(21,"ion-item"),u.Rb(22,"ion-label"),u.rc(23,"Tel"),u.Qb(),u.Rb(24,"ion-text"),u.rc(25),u.Qb(),u.Qb(),u.Rb(26,"ion-item"),u.Rb(27,"ion-label"),u.rc(28,"Avalia\xe7\xe3o"),u.Qb(),u.Rb(29,"ion-text"),u.rc(30),u.Qb(),u.Qb(),u.Qb(),u.qc(31,Q,21,5,"ion-item-group",8),u.qc(32,S,6,4,"div",8),u.Qb(),u.Qb()),2&i&&(u.hc("title",t.title),u.Bb(1),u.hc("fullscreen",!0),u.Bb(1),u.hc("title",t.title),u.Bb(1),u.hc("ngClass",u.kc(15,P,!t.isMobile)),u.Bb(3),u.hc("ngIf",t.user.photo&&t.id&&(t.loggedUser&&t.loggedUser.id!=t.id||!t.loggedUser)),u.Bb(1),u.hc("ngIf",t.user.photo&&(t.loggedUser&&t.loggedUser.id==t.id||!t.id)),u.Bb(1),u.hc("ngIf",!t.user.photo&&t.id&&t.loggedUser&&t.loggedUser.id!=t.id),u.Bb(1),u.hc("ngIf",!t.user.photo&&(t.loggedUser&&t.loggedUser.id==t.id||!t.id)),u.Bb(1),u.hc("ngIf",!t.user.active),u.Bb(5),u.sc(t.user.name),u.Bb(5),u.sc(t.user.email),u.Bb(5),u.sc(t.telephone),u.Bb(5),u.sc(t.user.avgRating||0==t.user.avgRating?t.user.avgRating+"%":"Nenhum"),u.Bb(1),u.hc("ngIf",t.user.addressId&&t.user.address),u.Bb(1),u.hc("ngIf",t.showButtons))},directives:[f.a,o.m,e.i,o.y,o.s,e.k,o.x,o.Q,o.H,o.l,o.t,o.e,o.cb,r.h],styles:["img[_ngcontent-%COMP%]{border-radius:50%;height:120px;width:120px;margin:5px auto 15px}.webrowser[_ngcontent-%COMP%]{text-align:center;position:absolute;left:0;right:0;top:50%;transform:translateY(-50%);width:var(--maxWidth);margin:0 auto;padding-top:30px}"]}),i})()}];let M=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=u.Kb({type:i}),i.\u0275inj=u.Jb({imports:[[r.k.forChild(k)],r.k]}),i})();var O=s("dagM");let L=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=u.Kb({type:i}),i.\u0275inj=u.Jb({imports:[[e.b,n.a,o.U,M,O.a]]}),i})()}}]);