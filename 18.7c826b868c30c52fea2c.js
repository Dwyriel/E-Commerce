(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{"2MiI":function(i,t,e){"use strict";e.d(t,"a",function(){return l});var s=e("OGMK"),o=e("fXoL"),r=e("ofXK"),n=e("TEn/");function c(i,t){if(1&i&&(o.Rb(0,"ion-header",3),o.Rb(1,"ion-toolbar"),o.Rb(2,"ion-buttons",4),o.Nb(3,"ion-menu-button"),o.Qb(),o.Rb(4,"ion-title"),o.qc(5),o.Qb(),o.Qb(),o.Qb()),2&i){const i=o.bc();o.gc("translucent",!0),o.Bb(5),o.rc(i.title)}}function b(i,t){if(1&i&&(o.Rb(0,"ion-header",5),o.Rb(1,"ion-toolbar"),o.Rb(2,"ion-title",6),o.qc(3),o.Qb(),o.Qb(),o.Qb()),2&i){const i=o.bc();o.Bb(3),o.rc(i.title)}}function d(i,t){1&i&&o.Nb(0,"div",7)}let l=(()=>{class i{constructor(){this.title="",this.isMobile=!0}ngOnInit(){this.subscription&&!this.subscription.closed&&this.subscription.unsubscribe(),this.subscription=s.a.GetAppInfo().subscribe(i=>{this.isMobile=i.appWidth<=s.a.maxMobileWidth})}ngOnDestroy(){this.subscription&&!this.subscription.closed&&this.subscription.unsubscribe()}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=o.Gb({type:i,selectors:[["app-header"]],inputs:{title:"title",segment:"segment"},decls:3,vars:3,consts:[[3,"translucent",4,"ngIf"],["collapse","condense",4,"ngIf"],["style","width: 100%; height: 65px;",4,"ngIf"],[3,"translucent"],["slot","start"],["collapse","condense"],["size","large"],[2,"width","100%","height","65px"]],template:function(i,t){1&i&&(o.pc(0,c,6,2,"ion-header",0),o.pc(1,b,4,1,"ion-header",1),o.pc(2,d,1,0,"div",2)),2&i&&(o.gc("ngIf",t.isMobile&&"0"==t.segment),o.Bb(1),o.gc("ngIf",t.isMobile&&"1"==t.segment),o.Bb(1),o.gc("ngIf",!t.isMobile&&"0"==t.segment))},directives:[r.k,n.j,n.K,n.f,n.t,n.J],styles:[""]}),i})()},dagM:function(i,t,e){"use strict";e.d(t,"a",function(){return b});var s=e("ofXK"),o=e("3Pt+"),r=e("tyNb"),n=e("TEn/"),c=e("fXoL");let b=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=c.Kb({type:i}),i.\u0275inj=c.Jb({imports:[[n.L,s.b,o.a,r.k]]}),i})()},"r9Z/":function(i,t,e){"use strict";e.r(t),e.d(t,"ProductProfilePageModule",function(){return x});var s=e("ofXK"),o=e("3Pt+"),r=e("TEn/"),n=e("tyNb"),c=e("mrSG"),b=e("OGMK"),d=e("BTSn"),l=e("CbRh"),a=e("fXoL"),u=e("3LUQ"),h=e("Gdn9"),p=e("qfBg"),g=e("4kQV"),v=e("c14U"),m=e("2MiI");function f(i,t){if(1&i&&(a.Rb(0,"ion-slide"),a.Nb(1,"ion-img",16),a.Qb()),2&i){const i=t.$implicit;a.Bb(1),a.gc("src",i)}}function w(i,t){if(1&i&&a.Nb(0,"img",17),2&i){const i=a.bc();a.ic("routerLink","/profile/",i.product.sellerID,"")}}function R(i,t){if(1&i&&a.Nb(0,"img",18),2&i){const i=a.bc();a.ic("routerLink","/profile/",i.product.sellerID,""),a.gc("src",i.SellerUser.photo,a.nc)}}function O(i,t){1&i&&(a.Rb(0,"ion-item"),a.Rb(1,"ion-label"),a.qc(2,"Produto sem avalia\xe7\xf5es"),a.Qb(),a.Qb())}function M(i,t){if(1&i&&(a.Rb(0,"div",21),a.Rb(1,"ion-row",22),a.Rb(2,"ion-row",23),a.Rb(3,"ion-badge",24),a.Nb(4,"ion-icon",25),a.Qb(),a.Rb(5,"ion-text"),a.qc(6),a.Qb(),a.Qb(),a.Rb(7,"div",26),a.Rb(8,"ion-note"),a.qc(9),a.Qb(),a.Qb(),a.Qb(),a.Rb(10,"div",27),a.Rb(11,"ion-text"),a.qc(12),a.Qb(),a.Qb(),a.Qb()),2&i){const i=t.$implicit;a.Bb(3),a.hc("color",i.recommend?"success":"danger"),a.Bb(1),a.ic("name","thumbs-",i.recommend?"up":"down","-sharp"),a.Bb(2),a.rc(i.title),a.Bb(3),a.rc(i.date.toLocaleString()),a.Bb(3),a.rc(i.text)}}function Q(i,t){if(1&i&&(a.Rb(0,"div"),a.Rb(1,"ion-text",19),a.qc(2,"Avalia\xe7\xf5es:"),a.Qb(),a.pc(3,M,13,5,"div",20),a.Qb()),2&i){const i=a.bc();a.Bb(3),a.gc("ngForOf",i.reviews)}}const y=function(i){return{webrowser:i}},S=[{path:"",component:(()=>{class i{constructor(i,t,e,s,o,r,n,c){this.router=i,this.activatedRoute=t,this.alertService=e,this.productService=s,this.userService=o,this.reviewService=r,this.cartService=n,this.navController=c,this.product=new d.a,this.loggedUser=null,this.SellerUser=new l.a,this.reviews=[],this.hasReviews=!1,this.positivos=0,this.negativos=0,this.title="Product",this.slideOpts={slidesPerView:1,slidesPerColumn:1,slidesPerGroup:1,watchSlidesProgress:!0}}ngOnInit(){}ionViewWillEnter(){this.GetPlataformInfo(),this.getProduct(),this.getLoggedUser()}ionViewWillLeave(){this.SellerUser=new l.a,this.loggedUser=null,this.product=new d.a,this.id=null,this.reviews=[],this.hasReviews=!1,this.subscription1&&!this.subscription1.closed&&this.subscription1.unsubscribe(),this.subscription2&&!this.subscription2.closed&&this.subscription2.unsubscribe(),this.subscription3&&!this.subscription3.closed&&this.subscription3.unsubscribe(),this.subscription4&&!this.subscription4.closed&&this.subscription4.unsubscribe(),this.subscription5&&!this.subscription5.closed&&this.subscription5.unsubscribe()}GetPlataformInfo(){this.subscription1&&!this.subscription1.closed&&this.subscription1.unsubscribe(),this.subscription1=b.a.GetAppInfo().subscribe(i=>{this.isMobile=i.appWidth<=b.a.maxMobileWidth,this.setDivWidth(.4*i.appWidth>b.a.maxMobileWidth/1.5?"40%":b.a.maxMobileWidth/1.5+"px")})}setDivWidth(i){document.body.style.setProperty("--maxWidth",i)}getProduct(){return Object(c.b)(this,void 0,void 0,function*(){if(yield this.alertService.presentLoading().then(i=>this.loadingAlert=i),this.id=this.activatedRoute.snapshot.paramMap.get("id"),!this.id)return this.navController.back(),void(yield this.alertService.dismissLoading(this.loadingAlert));this.subscription2&&!this.subscription2.closed&&this.subscription2.unsubscribe(),this.subscription2=(yield this.productService.Get(this.id)).subscribe(i=>Object(c.b)(this,void 0,void 0,function*(){if(!i||i&&!i.verified)return this.navController.back(),void(yield this.alertService.dismissLoading(this.loadingAlert));this.product=Object.assign(Object.assign({},i),{fillSubCategory:this.product.fillSubCategory,calculateAvgRating:this.product.calculateAvgRating}),this.product.id=this.id,this.title=this.product.name;var t={seller:!0,reviews:!0};for(this.GetSeller(t),this.GetReviews(t);t.reviews||t.seller;)yield new Promise(i=>setTimeout(i,10));this.product.calculateAvgRating(),yield this.alertService.dismissLoading(this.loadingAlert)}),i=>Object(c.b)(this,void 0,void 0,function*(){this.ErrorLoading("Ops","Ocorreu um erro durante o carregamento das informa\xe7\xf5es, tente denovo daqui a pouco.")}))})}GetSeller(i){return Object(c.b)(this,void 0,void 0,function*(){this.subscription3&&!this.subscription3.closed&&this.subscription3.unsubscribe(),this.subscription3=(yield this.userService.Get(this.product.sellerID)).subscribe(t=>Object(c.b)(this,void 0,void 0,function*(){this.SellerUser=t,i.seller=!1}),i=>Object(c.b)(this,void 0,void 0,function*(){this.ErrorLoading("Ops","Ocorreu um erro durante o carregamento das informa\xe7\xf5es, tente denovo daqui a pouco.")}))})}GetReviews(i){return Object(c.b)(this,void 0,void 0,function*(){this.subscription4&&!this.subscription4.closed&&this.subscription4.unsubscribe(),this.subscription4=(yield this.reviewService.GetAllFromProduct(this.product.id)).subscribe(t=>Object(c.b)(this,void 0,void 0,function*(){for(var e of(this.reviews=t,i.reviews=!1,this.hasReviews=this.reviews.length>1,this.positivos=0,this.negativos=0,this.reviews))this.positivos=e.recommend?++this.positivos:this.positivos,this.negativos=e.recommend?this.negativos:++this.negativos}),i=>Object(c.b)(this,void 0,void 0,function*(){this.ErrorLoading("Ops","Ocorreu um erro durante o carregamento das avalia\xe7\xf5es, tente denovo daqui a pouco.")}))})}getLoggedUser(){return Object(c.b)(this,void 0,void 0,function*(){this.subscription5&&!this.subscription5.closed&&this.subscription5.unsubscribe(),this.subscription5=b.a.GetUserInfo().subscribe(i=>Object(c.b)(this,void 0,void 0,function*(){this.loggedUser=i}))})}ErrorLoading(i,t){return Object(c.b)(this,void 0,void 0,function*(){yield this.alertService.dismissLoading(this.loadingAlert),yield this.alertService.presentAlert(i,t)})}AddToCart(){return Object(c.b)(this,void 0,void 0,function*(){this.loggedUser?(yield this.alertService.presentLoading().then(i=>this.loadingAlert=i),this.loggedUser.cart||(this.loggedUser.cart=[]),this.cartService.AddItem(this.id,this.loggedUser.cart),yield this.userService.UpdateCart(this.loggedUser.id,this.loggedUser.cart).then(i=>Object(c.b)(this,void 0,void 0,function*(){yield this.alertService.dismissLoading(this.loadingAlert),yield this.alertService.ShowToast("Added to cart")}),i=>Object(c.b)(this,void 0,void 0,function*(){this.cartService.RemoveItem(this.id,this.loggedUser.cart),yield this.alertService.dismissLoading(this.loadingAlert),yield this.alertService.presentAlert("Oops","There was a problem adding the item to the cart")}))):yield this.router.navigate(["/login"])})}}return i.\u0275fac=function(t){return new(t||i)(a.Mb(n.g),a.Mb(n.a),a.Mb(u.a),a.Mb(h.a),a.Mb(p.a),a.Mb(g.a),a.Mb(v.a),a.Mb(r.P))},i.\u0275cmp=a.Gb({type:i,selectors:[["app-product-profile"]],decls:37,vars:24,consts:[["segment","0",3,"title"],[3,"fullscreen"],["segment","1",3,"title"],[1,"ion-margin",3,"ngClass"],["pager","true",3,"options"],[4,"ngFor","ngForOf"],[1,"tooltip"],[1,"tooltiptext","tooltip-top"],["color","success","mode","ios",1,"badge-bottom"],["color","danger","mode","ios",1,"badge-bottom"],[3,"disabled","click"],["id","product-seller",1,"ion-padding-vertical","ion-align-items-center","ion-justify-content-start"],["id","sellerimage","src","../../../assets/perfil.png",3,"routerLink",4,"ngIf"],["id","sellerimage",3,"src","routerLink",4,"ngIf"],[3,"routerLink"],[4,"ngIf"],[3,"src"],["id","sellerimage","src","../../../assets/perfil.png",3,"routerLink"],["id","sellerimage",3,"src","routerLink"],[1,"reviewsTitle"],["class","reviews",4,"ngFor","ngForOf"],[1,"reviews"],[1,"ion-justify-content-between"],[1,"ion-align-items-center"],[1,"reviewThumb",3,"color"],["size","large","color","dark",3,"name"],[1,"ion-text-end"],[1,"reviewText"]],template:function(i,t){1&i&&(a.Nb(0,"app-header",0),a.Rb(1,"ion-content",1),a.Nb(2,"app-header",2),a.Rb(3,"div",3),a.Rb(4,"ion-slides",4),a.pc(5,f,2,1,"ion-slide",5),a.Qb(),a.Rb(6,"h2"),a.qc(7),a.Qb(),a.Rb(8,"p"),a.Rb(9,"span",6),a.qc(10),a.Rb(11,"span",7),a.Rb(12,"ion-badge",8),a.qc(13),a.Qb(),a.qc(14," - "),a.Rb(15,"ion-badge",9),a.qc(16),a.Qb(),a.Qb(),a.Qb(),a.Qb(),a.Rb(17,"p"),a.qc(18),a.cc(19,"currency"),a.Qb(),a.Rb(20,"ion-button",10),a.Zb("click",function(){return t.AddToCart()}),a.qc(21,"Adicionar no carrinho"),a.Qb(),a.Rb(22,"h3"),a.qc(23,"Descri\xe7\xe3o:"),a.Qb(),a.Rb(24,"p"),a.Rb(25,"ion-text"),a.qc(26),a.Qb(),a.Qb(),a.Rb(27,"ion-row",11),a.pc(28,w,1,1,"img",12),a.pc(29,R,1,2,"img",13),a.Rb(30,"ion-label",14),a.Rb(31,"h3"),a.qc(32,"Vendedor: "),a.Qb(),a.Rb(33,"h2"),a.qc(34),a.Qb(),a.Qb(),a.Qb(),a.pc(35,O,3,0,"ion-item",15),a.pc(36,Q,4,1,"div",15),a.Qb(),a.Qb()),2&i&&(a.gc("title",t.title),a.Bb(1),a.gc("fullscreen",!0),a.Bb(1),a.gc("title",t.title),a.Bb(1),a.gc("ngClass",a.jc(22,y,!t.isMobile)),a.Bb(1),a.gc("options",t.slideOpts),a.Bb(1),a.gc("ngForOf",t.product.gallery),a.Bb(2),a.rc(t.product.name),a.Bb(3),a.sc(" Avalia\xe7\xe3o: ",t.product.avgReview?t.product.avgReview+"%":"Nenhum"," "),a.Bb(3),a.rc(t.positivos),a.Bb(3),a.rc(t.negativos),a.Bb(2),a.rc(a.dc(19,19,t.product.price,"BRL")),a.Bb(2),a.gc("disabled",1>t.product.stock||t.loggedUser&&t.loggedUser.id==t.product.sellerID),a.Bb(6),a.rc(t.product.description),a.Bb(2),a.gc("ngIf",!t.SellerUser.photo),a.Bb(1),a.gc("ngIf",t.SellerUser.photo),a.Bb(1),a.ic("routerLink","/profile/",t.product.sellerID,""),a.Bb(4),a.rc(t.SellerUser.name),a.Bb(1),a.gc("ngIf",!t.hasReviews),a.Bb(1),a.gc("ngIf",t.hasReviews))},directives:[m.a,r.h,s.i,r.F,s.j,r.d,r.e,r.H,r.z,s.k,r.p,r.T,n.h,r.E,r.l,r.n,r.k,r.v],pipes:[s.c],styles:["ion-img[_ngcontent-%COMP%]{height:200px;margin:5px auto}.webrowser[_ngcontent-%COMP%]{width:var(--maxWidth);margin:0 auto;padding-top:1rem}.reviewsTitle[_ngcontent-%COMP%]{font-size:1.4rem}.reviews[_ngcontent-%COMP%]{padding-top:1rem;padding-bottom:.7rem;border-bottom:1px solid var(--ion-color-step-150,#d7d8da)}.reviews[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]{size:100%}.reviews[_ngcontent-%COMP%]   ion-note[_ngcontent-%COMP%]{font-size:.65rem}.reviewThumb[_ngcontent-%COMP%]{height:2.5rem;width:3rem;margin-right:.3rem;margin-left:-.2rem}.reviewText[_ngcontent-%COMP%]{margin-top:.7rem;text-align:start;white-space:pre-wrap}.tooltip[_ngcontent-%COMP%]{position:relative;display:inline-block;border-bottom:1px dotted #000}.tooltip[_ngcontent-%COMP%]   .tooltiptext[_ngcontent-%COMP%]{visibility:hidden;width:120px;background-color:#c7c7c7;color:#fff;text-align:center;border-radius:6px;padding:5px 0;position:absolute;z-index:1}.tooltip[_ngcontent-%COMP%]:hover   .tooltiptext[_ngcontent-%COMP%]{visibility:visible}.tooltip-top[_ngcontent-%COMP%]{bottom:125%;left:50%;margin-left:-16.5%}.badge-bottom[_ngcontent-%COMP%]{margin-bottom:-3px}#sellerimage[_ngcontent-%COMP%]{border-radius:50%;height:2.5rem;width:2.5rem;margin-right:.3rem}"]}),i})()}];let P=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=a.Kb({type:i}),i.\u0275inj=a.Jb({imports:[[n.k.forChild(S)],n.k]}),i})();var B=e("dagM");let x=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=a.Kb({type:i}),i.\u0275inj=a.Jb({imports:[[s.b,o.a,r.L,P,B.a]]}),i})()}}]);