(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{"2MiI":function(t,i,e){"use strict";e.d(i,"a",function(){return b});var s=e("OGMK"),n=e("fXoL"),o=e("ofXK"),r=e("TEn/");function c(t,i){if(1&t&&(n.Rb(0,"ion-header",3),n.Rb(1,"ion-toolbar"),n.Rb(2,"ion-buttons",4),n.Nb(3,"ion-menu-button"),n.Qb(),n.Rb(4,"ion-title"),n.qc(5),n.Qb(),n.Qb(),n.Qb()),2&t){const t=n.bc();n.gc("translucent",!0),n.Bb(5),n.rc(t.title)}}function a(t,i){if(1&t&&(n.Rb(0,"ion-header",5),n.Rb(1,"ion-toolbar"),n.Rb(2,"ion-title",6),n.qc(3),n.Qb(),n.Qb(),n.Qb()),2&t){const t=n.bc();n.Bb(3),n.rc(t.title)}}function u(t,i){1&t&&n.Nb(0,"div",7)}let b=(()=>{class t{constructor(){this.title="",this.isMobile=!0}ngOnInit(){this.subscription&&!this.subscription.closed&&this.subscription.unsubscribe(),this.subscription=s.a.GetAppInfo().subscribe(t=>{this.isMobile=t.appWidth<=s.a.maxMobileWidth})}ngOnDestroy(){this.subscription&&!this.subscription.closed&&this.subscription.unsubscribe()}}return t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=n.Gb({type:t,selectors:[["app-header"]],inputs:{title:"title",segment:"segment"},decls:3,vars:3,consts:[[3,"translucent",4,"ngIf"],["collapse","condense",4,"ngIf"],["style","width: 100%; height: 65px;",4,"ngIf"],[3,"translucent"],["slot","start"],["collapse","condense"],["size","large"],[2,"width","100%","height","65px"]],template:function(t,i){1&t&&(n.pc(0,c,6,2,"ion-header",0),n.pc(1,a,4,1,"ion-header",1),n.pc(2,u,1,0,"div",2)),2&t&&(n.gc("ngIf",i.isMobile&&"0"==i.segment),n.Bb(1),n.gc("ngIf",i.isMobile&&"1"==i.segment),n.Bb(1),n.gc("ngIf",!i.isMobile&&"0"==i.segment))},directives:[o.k,r.o,r.S,r.f,r.B,r.R],styles:[""]}),t})()},dagM:function(t,i,e){"use strict";e.d(i,"a",function(){return a});var s=e("ofXK"),n=e("3Pt+"),o=e("tyNb"),r=e("TEn/"),c=e("fXoL");let a=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=c.Kb({type:t}),t.\u0275inj=c.Jb({imports:[[r.T,s.b,n.a,o.k]]}),t})()},tr9m:function(t,i,e){"use strict";e.r(i),e.d(i,"ProductListPageModule",function(){return P});var s=e("ofXK"),n=e("3Pt+"),o=e("TEn/"),r=e("tyNb"),c=e("mrSG"),a=e("OGMK"),u=e("PVVB"),b=e("fXoL"),l=e("Gdn9"),d=e("4kQV"),h=e("3LUQ"),p=e("2MiI");function g(t,i){if(1&t&&(b.Rb(0,"div",10),b.qc(1),b.Qb()),2&t){const t=b.bc();b.Bb(1),b.rc(t.title)}}function f(t,i){if(1&t){const t=b.Sb();b.Rb(0,"div",11),b.Rb(1,"ion-select",12),b.Zb("ngModelChange",function(i){return b.mc(t),b.bc().sorting=i})("ngModelChange",function(){return b.mc(t),b.bc().sortListing()}),b.Rb(2,"ion-select-option",13),b.qc(3,"Maior pre\xe7o"),b.Qb(),b.Rb(4,"ion-select-option",13),b.qc(5,"Menor pre\xe7o"),b.Qb(),b.Rb(6,"ion-select-option",13),b.qc(7,"Avalia\xe7\xe3o"),b.Qb(),b.Qb(),b.Qb()}if(2&t){const t=b.bc();b.Bb(1),b.gc("ngModel",t.sorting),b.Bb(1),b.gc("value",0),b.Bb(2),b.gc("value",1),b.Bb(2),b.gc("value",2)}}function v(t,i){1&t&&(b.Rb(0,"div",14),b.qc(1,"Nenhum item encontrado."),b.Qb())}function m(t,i){if(1&t&&b.Nb(0,"img",18),2&t){const t=b.bc().$implicit;b.gc("src",t.gallery[0],b.nc)("alt",t.name)}}function y(t,i){if(1&t&&(b.Rb(0,"ion-item",15),b.pc(1,m,1,2,"img",16),b.Rb(2,"ion-label"),b.Rb(3,"h2"),b.qc(4),b.Qb(),b.Rb(5,"h3"),b.qc(6),b.cc(7,"currency"),b.Rb(8,"span",17),b.qc(9),b.Qb(),b.Qb(),b.Qb(),b.Qb()),2&t){const t=i.$implicit;b.ic("routerLink","/product/",t.id,""),b.Bb(1),b.gc("ngIf",(null==t.gallery?null:t.gallery.length)>0),b.Bb(3),b.rc(t.name),b.Bb(2),b.rc(b.dc(7,5,t.price,"BRL")),b.Bb(3),b.sc("Avalia\xe7\xe3o: ",t.avgReview||0==t.avgReview?t.avgReview+"%":"Nenhum","")}}const R=function(t){return{webrowser:t}},M=[{path:"",component:(()=>{class t{constructor(t,i,e,s,n){this.activatedRoute=t,this.productService=i,this.reviewService=e,this.router=s,this.alertService=n,this.searchInput=null,this.title="Produtos"}ngOnInit(){}ionViewWillEnter(){return Object(c.b)(this,void 0,void 0,function*(){this.GetPlataformInfo(),this.GetProducts()})}ionViewWillLeave(){this.subscription1&&!this.subscription1.closed&&this.subscription1.unsubscribe(),this.subscription2&&!this.subscription2.closed&&this.subscription2.unsubscribe(),this.subscription3&&!this.subscription3.closed&&this.subscription3.unsubscribe()}GetPlataformInfo(){this.subscription3=a.a.GetAppInfo().subscribe(t=>{this.isMobile=t.appWidth<=a.a.maxMobileWidth,this.setDivWidth(.4*t.appWidth>a.a.maxMobileWidth/1.5?"40%":a.a.maxMobileWidth/1.5+"px")})}setDivWidth(t){document.body.style.setProperty("--maxWidth",t)}GetProducts(t=null){return Object(c.b)(this,void 0,void 0,function*(){yield this.alertService.presentLoading().then(t=>this.LoadingAlertID=t),this.searchInput=this.activatedRoute.snapshot.paramMap.get("search"),this.allFromCat=this.activatedRoute.snapshot.paramMap.get("cat"),this.categoryValue=parseInt(this.activatedRoute.snapshot.paramMap.get("value")),this.searchInput?this.GetProductsFromSearch():"all"!==this.allFromCat?"sub"!==this.allFromCat?yield this.GetAllProducts(t):yield this.GetProductsFromSubCat(t):this.GetProductsFromCat(t)})}GetProductsFromSearch(){}GetProductsFromCat(t=null){return Object(c.b)(this,void 0,void 0,function*(){u.a.CatsContains(this.categoryValue)&&(this.category=u.a.GetCatFromValue(this.categoryValue),this.title=`Categoria: ${this.category.title}`,this.products=yield this.productService.getAllVerifiedFromCat(this.categoryValue),yield this.FillProductAttributes(t))})}GetProductsFromSubCat(t=null){return Object(c.b)(this,void 0,void 0,function*(){u.a.SubCatsContains(this.categoryValue)&&(this.subcategory=u.a.GetSubCatFromValue(this.categoryValue),this.title=`${this.subcategory.title} em ${u.a.GetCatFromValue(this.subcategory.category).title}`,this.subscription1&&!this.subscription1.closed&&this.subscription1.unsubscribe(),this.subscription1=(yield this.productService.GetAllVerifiedFromSubCat(this.categoryValue)).subscribe(i=>Object(c.b)(this,void 0,void 0,function*(){this.products=i,yield this.FillProductAttributes(t)})))})}GetAllProducts(t=null){return Object(c.b)(this,void 0,void 0,function*(){this.subscription2&&!this.subscription2.closed&&this.subscription2.unsubscribe(),this.subscription2=(yield this.productService.GetAllVerified()).subscribe(i=>Object(c.b)(this,void 0,void 0,function*(){this.title="Produtos",this.products=i,yield this.FillProductAttributes(t)}))})}FillProductAttributes(t){return Object(c.b)(this,void 0,void 0,function*(){var i=!0,e=[],s=0,n=this.products.length;if(this.products&&this.products.length>0)for(var o of this.products)o.fillSubCategory(),e.push((yield this.reviewService.GetAllFromProduct(o.id)).subscribe(t=>{o.reviews=t,o.reviews&&o.calculateAvgRating(),++s>=n&&(i=!1)},t=>Object(c.b)(this,void 0,void 0,function*(){i=!1})));else i=!1;for(;i;)yield new Promise(t=>setTimeout(t,10));for(var r of e)r.unsubscribe();t&&(yield t.target.complete()),yield this.alertService.dismissLoading(this.LoadingAlertID)})}RefreshContent(t){return Object(c.b)(this,void 0,void 0,function*(){yield this.GetProducts(t)})}sortListing(){switch(this.sorting){case 0:this.products.sort((t,i)=>i.price-t.price);break;case 1:this.products.sort((t,i)=>t.price-i.price);break;case 2:this.products.sort((t,i)=>i.avgReview-t.avgReview)}}}return t.\u0275fac=function(i){return new(i||t)(b.Mb(r.a),b.Mb(l.a),b.Mb(d.a),b.Mb(r.g),b.Mb(h.a))},t.\u0275cmp=b.Gb({type:t,selectors:[["app-product-list"]],decls:11,vars:10,consts:[["segment","0",3,"title"],[3,"fullscreen"],["segment","1",3,"title"],["slot","fixed",3,"ionRefresh"],["pullingIcon","bubbles","refreshingSpinner","bubbles"],[3,"ngClass"],["style","padding-bottom: .3rem;",4,"ngIf"],["style","width: 40%; margin-left: 58%; text-align: right;",4,"ngIf"],["style","text-align: center;",4,"ngIf"],["lines","inset",3,"routerLink",4,"ngFor","ngForOf"],[2,"padding-bottom",".3rem"],[2,"width","40%","margin-left","58%","text-align","right"],["name","sort","interface","popover","placeholder","Ordenar",3,"ngModel","ngModelChange"],[3,"value"],[2,"text-align","center"],["lines","inset",3,"routerLink"],[3,"src","alt",4,"ngIf"],[1,"ion-float-right",2,"font-size",".75rem"],[3,"src","alt"]],template:function(t,i){1&t&&(b.Nb(0,"app-header",0),b.Rb(1,"ion-content",1),b.Nb(2,"app-header",2),b.Rb(3,"ion-refresher",3),b.Zb("ionRefresh",function(t){return i.RefreshContent(t)}),b.Nb(4,"ion-refresher-content",4),b.Qb(),b.Rb(5,"div",5),b.pc(6,g,2,1,"div",6),b.Rb(7,"ion-list"),b.pc(8,f,8,4,"div",7),b.pc(9,v,2,0,"div",8),b.pc(10,y,10,8,"ion-item",9),b.Qb(),b.Qb(),b.Qb()),2&t&&(b.gc("title",i.title),b.Bb(1),b.gc("fullscreen",!0),b.Bb(1),b.gc("title",i.title),b.Bb(3),b.gc("ngClass",b.jc(8,R,!i.isMobile)),b.Bb(1),b.gc("ngIf",!i.isMobile),b.Bb(2),b.gc("ngIf",i.products&&i.products.length>0),b.Bb(1),b.gc("ngIf",!i.products||i.products&&1>i.products.length),b.Bb(1),b.gc("ngForOf",i.products))},directives:[p.a,o.m,o.E,o.F,s.i,s.k,o.y,s.j,o.K,o.cb,n.f,n.i,o.L,o.s,o.bb,r.h,o.x],pipes:[s.c],styles:["img[_ngcontent-%COMP%]{border-radius:10%;height:40px;width:40px;margin:0 7px 0 0}.webrowser[_ngcontent-%COMP%]{text-align:center;width:var(--maxWidth);margin:0 auto;padding-top:1rem}"]}),t})()}];let w=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=b.Kb({type:t}),t.\u0275inj=b.Jb({imports:[[r.k.forChild(M)],r.k]}),t})();var I=e("dagM");let P=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=b.Kb({type:t}),t.\u0275inj=b.Jb({imports:[[s.b,n.a,o.T,w,I.a]]}),t})()}}]);