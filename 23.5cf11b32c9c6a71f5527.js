(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{"2MiI":function(t,i,s){"use strict";s.d(i,"a",function(){return u});var e=s("OGMK"),n=s("fXoL"),r=s("ofXK"),c=s("TEn/");function o(t,i){if(1&t&&(n.Rb(0,"ion-header",3),n.Rb(1,"ion-toolbar"),n.Rb(2,"ion-buttons",4),n.Nb(3,"ion-menu-button"),n.Qb(),n.Rb(4,"ion-title"),n.rc(5),n.Qb(),n.Qb(),n.Qb()),2&t){const t=n.bc();n.hc("translucent",!0),n.Bb(5),n.sc(t.title)}}function a(t,i){if(1&t&&(n.Rb(0,"ion-header",5),n.Rb(1,"ion-toolbar"),n.Rb(2,"ion-title",6),n.rc(3),n.Qb(),n.Qb(),n.Qb()),2&t){const t=n.bc();n.Bb(3),n.sc(t.title)}}function h(t,i){1&t&&n.Nb(0,"div",7)}let u=(()=>{class t{constructor(){this.title="",this.isMobile=!0}ngOnInit(){this.subscription&&!this.subscription.closed&&this.subscription.unsubscribe(),this.subscription=e.a.GetAppInfo().subscribe(t=>{this.isMobile=t.appWidth<=e.a.maxMobileWidth})}ngOnDestroy(){this.subscription&&!this.subscription.closed&&this.subscription.unsubscribe()}}return t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=n.Gb({type:t,selectors:[["app-header"]],inputs:{title:"title",segment:"segment"},decls:3,vars:3,consts:[[3,"translucent",4,"ngIf"],["collapse","condense",4,"ngIf"],["style","width: 100%; height: 65px;",4,"ngIf"],[3,"translucent"],["slot","start"],["collapse","condense"],["size","large"],[2,"width","100%","height","65px"]],template:function(t,i){1&t&&(n.qc(0,o,6,2,"ion-header",0),n.qc(1,a,4,1,"ion-header",1),n.qc(2,h,1,0,"div",2)),2&t&&(n.hc("ngIf",i.isMobile&&"0"==i.segment),n.Bb(1),n.hc("ngIf",i.isMobile&&"1"==i.segment),n.Bb(1),n.hc("ngIf",!i.isMobile&&"0"==i.segment))},directives:[r.k,c.o,c.T,c.f,c.B,c.S],styles:[""]}),t})()},"Gc/U":function(t,i,s){"use strict";s.r(i),s.d(i,"PurchasesListPageModule",function(){return O});var e=s("ofXK"),n=s("3Pt+"),r=s("TEn/"),c=s("tyNb"),o=s("mrSG"),a=s("OGMK"),h=s("fcTE"),u=s("fXoL"),b=s("3LUQ"),l=s("xHty"),d=s("Gdn9"),p=s("2MiI");function f(t,i){if(1&t&&(u.Rb(0,"div"),u.Rb(1,"p",5),u.rc(2),u.Qb(),u.Qb()),2&t){const t=u.bc();u.Bb(2),u.tc("Nenhuma ",t.purchasePage?"compra":"venda"," realizada.")}}function g(t,i){if(1&t&&u.Nb(0,"img",9),2&t){const t=u.bc().$implicit;u.hc("src",t.exemploProduct.gallery[0],u.oc)("alt",t.exemploProduct.name)}}function m(t,i){if(1&t&&(u.Pb(0),u.Rb(1,"ion-item",7),u.qc(2,g,1,2,"img",8),u.Rb(3,"ion-label"),u.Rb(4,"h2"),u.rc(5),u.Qb(),u.Rb(6,"h3"),u.rc(7),u.Qb(),u.Qb(),u.Qb(),u.Ob()),2&t){const t=i.$implicit,s=u.bc(2);u.Bb(1),u.jc("routerLink","/purchase/",t.purchase.id,""),u.Bb(1),u.hc("ngIf",(null==t.exemploProduct.gallery?null:t.exemploProduct.gallery.length)>0),u.Bb(3),u.tc("Status: ",s.StateToString(t.purchase.state)," "),u.Bb(2),u.tc("Data: ",t.purchase.date.toLocaleString(),"")}}function v(t,i){if(1&t&&(u.Rb(0,"ion-list"),u.qc(1,m,8,4,"ng-container",6),u.Qb()),2&t){const t=u.bc();u.Bb(1),u.hc("ngForOf",t.purchasesObjs)}}const y=function(t){return{webrowser:t}},P=[{path:"",component:(()=>{class t{constructor(t,i,s,e,n){this.activatedRoute=t,this.alertService=i,this.purchaseService=s,this.router=e,this.productService=n,this.purchases=[],this.purchasesObjs=[],this.subscriptions=[]}ngOnInit(){this.GetPlataformInfo()}ionViewWillEnter(){return Object(o.b)(this,void 0,void 0,function*(){this.type=this.activatedRoute.snapshot.paramMap.get("type"),this.type?(this.purchasePage="purchases"==this.type,this.GetUserAndPurchases()):yield this.router.navigate(["/"])})}ionViewWillLeave(){if(this.purchases=[],this.user=null,this.purchasesObjs=[],this.subscription1&&!this.subscription1.closed&&this.subscription1.unsubscribe(),this.subscription2&&!this.subscription2.closed&&this.subscription2.unsubscribe(),this.subscription3&&!this.subscription3.closed&&this.subscription3.unsubscribe(),this.subscriptions&&this.subscriptions.length>0){for(var t of this.subscriptions)t&&!t.closed&&t.unsubscribe();this.subscriptions=[]}}GetPlataformInfo(){this.subscription1=a.a.GetAppInfo().subscribe(t=>{this.isMobile=t.appWidth<=a.a.maxMobileWidth,this.setDivWidth(.4*t.appWidth>a.a.maxMobileWidth/1.5?"40%":a.a.maxMobileWidth/1.5+"px")})}setDivWidth(t){document.body.style.setProperty("--maxWidth",t)}GetUserAndPurchases(){return Object(o.b)(this,void 0,void 0,function*(){yield this.alertService.presentLoading().then(t=>this.loadingAlertID=t),this.subscription2=a.a.GetUserInfo().subscribe(t=>Object(o.b)(this,void 0,void 0,function*(){if(!t)return yield this.router.navigate(["/login"]),void(yield this.alertService.dismissLoading(this.loadingAlertID));this.user=t,this.GetPurchases()}),t=>Object(o.b)(this,void 0,void 0,function*(){yield this.alertService.dismissLoading(this.loadingAlertID),yield this.alertService.presentAlert("Ops","Algo deu errado, tente novamente mais tarde.")}))})}GetPurchases(){return Object(o.b)(this,void 0,void 0,function*(){this.subscription3&&!this.subscription3.closed&&this.subscription3.unsubscribe(),this.subscription3=(yield this.purchasePage?this.purchaseService.GetAllFromUser(this.user.id):this.purchaseService.GetAllFromSeller(this.user.id)).subscribe(t=>Object(o.b)(this,void 0,void 0,function*(){if(!t||t.length<1)yield this.alertService.dismissLoading(this.loadingAlertID);else{if(this.subscriptions&&this.subscriptions.length>0){for(var i of this.subscriptions)i&&!i.closed&&i.unsubscribe();this.subscriptions=[]}this.hasPurchases=t&&t.length>0,this.purchases=this.hasPurchases?t:[];var s=[],e=!0,n=!0,r=0,c=this.purchases.length;for(var o of this.purchases)for(n=!0,this.subscriptions.push((yield this.productService.Get(o.item.productID)).subscribe(t=>{s.push({exemploProduct:t,purchase:o}),++r>=c&&(e=!1),n=!1}));n;)yield new Promise(t=>setTimeout(t,10));for(;e;)yield new Promise(t=>setTimeout(t,10));this.purchasesObjs=s,yield this.alertService.dismissLoading(this.loadingAlertID)}}),t=>Object(o.b)(this,void 0,void 0,function*(){yield this.alertService.dismissLoading(this.loadingAlertID),yield this.alertService.presentAlert("Ops","Algo deu errado, tente novamente mais tarde.")}))})}StateToString(t){return Object(h.d)(t)}}return t.\u0275fac=function(i){return new(i||t)(u.Mb(c.a),u.Mb(b.a),u.Mb(l.a),u.Mb(c.g),u.Mb(d.a))},t.\u0275cmp=u.Gb({type:t,selectors:[["app-purchases"]],decls:6,vars:6,consts:[["title","Compras","segment","0"],[3,"fullscreen"],["title","Compras","segment","1"],[3,"ngClass"],[4,"ngIf"],[1,"ion-text-center"],[4,"ngFor","ngForOf"],[3,"routerLink"],[3,"src","alt",4,"ngIf"],[3,"src","alt"]],template:function(t,i){1&t&&(u.Nb(0,"app-header",0),u.Rb(1,"ion-content",1),u.Nb(2,"app-header",2),u.Rb(3,"div",3),u.qc(4,f,3,1,"div",4),u.qc(5,v,2,1,"ion-list",4),u.Qb(),u.Qb()),2&t&&(u.Bb(1),u.hc("fullscreen",!0),u.Bb(2),u.hc("ngClass",u.kc(4,y,!i.isMobile)),u.Bb(1),u.hc("ngIf",!i.hasPurchases),u.Bb(1),u.hc("ngIf",i.hasPurchases))},directives:[p.a,r.m,e.i,e.k,r.y,e.j,r.s,r.cb,c.h,r.x],styles:[".webrowser[_ngcontent-%COMP%]{text-align:center;width:var(--maxWidth);margin:0 auto;padding-top:1rem}img[_ngcontent-%COMP%]{border-radius:10%;height:40px;width:40px;margin:0 7px 0 0}"]}),t})()}];let I=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=u.Kb({type:t}),t.\u0275inj=u.Jb({imports:[[c.k.forChild(P)],c.k]}),t})();var M=s("dagM");let O=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=u.Kb({type:t}),t.\u0275inj=u.Jb({imports:[[e.b,n.a,r.U,I,M.a]]}),t})()},dagM:function(t,i,s){"use strict";s.d(i,"a",function(){return a});var e=s("ofXK"),n=s("3Pt+"),r=s("tyNb"),c=s("TEn/"),o=s("fXoL");let a=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=o.Kb({type:t}),t.\u0275inj=o.Jb({imports:[[c.U,e.b,n.a,r.k]]}),t})()}}]);