(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{"2MiI":function(e,i,t){"use strict";t.d(i,"a",function(){return c});var n=t("OGMK"),o=t("fXoL"),s=t("ofXK"),r=t("TEn/");function a(e,i){if(1&e&&(o.Rb(0,"ion-header",3),o.Rb(1,"ion-toolbar"),o.Rb(2,"ion-buttons",4),o.Nb(3,"ion-menu-button"),o.Qb(),o.Rb(4,"ion-title"),o.qc(5),o.Qb(),o.Qb(),o.Qb()),2&e){const e=o.bc();o.gc("translucent",!0),o.Bb(5),o.rc(e.title)}}function d(e,i){if(1&e&&(o.Rb(0,"ion-header",5),o.Rb(1,"ion-toolbar"),o.Rb(2,"ion-title",6),o.qc(3),o.Qb(),o.Qb(),o.Qb()),2&e){const e=o.bc();o.Bb(3),o.rc(e.title)}}function l(e,i){1&e&&o.Nb(0,"div",7)}let c=(()=>{class e{constructor(){this.title="",this.isMobile=!0}ngOnInit(){this.subscription&&!this.subscription.closed&&this.subscription.unsubscribe(),this.subscription=n.a.GetAppInfo().subscribe(e=>{this.isMobile=e.appWidth<=n.a.maxMobileWidth})}ngOnDestroy(){this.subscription&&!this.subscription.closed&&this.subscription.unsubscribe()}}return e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=o.Gb({type:e,selectors:[["app-header"]],inputs:{title:"title",segment:"segment"},decls:3,vars:3,consts:[[3,"translucent",4,"ngIf"],["collapse","condense",4,"ngIf"],["style","width: 100%; height: 65px;",4,"ngIf"],[3,"translucent"],["slot","start"],["collapse","condense"],["size","large"],[2,"width","100%","height","65px"]],template:function(e,i){1&e&&(o.pc(0,a,6,2,"ion-header",0),o.pc(1,d,4,1,"ion-header",1),o.pc(2,l,1,0,"div",2)),2&e&&(o.gc("ngIf",i.isMobile&&"0"==i.segment),o.Bb(1),o.gc("ngIf",i.isMobile&&"1"==i.segment),o.Bb(1),o.gc("ngIf",!i.isMobile&&"0"==i.segment))},directives:[s.k,r.o,r.P,r.f,r.y,r.O],styles:[""]}),e})()},dagM:function(e,i,t){"use strict";t.d(i,"a",function(){return d});var n=t("ofXK"),o=t("3Pt+"),s=t("tyNb"),r=t("TEn/"),a=t("fXoL");let d=(()=>{class e{}return e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=a.Kb({type:e}),e.\u0275inj=a.Jb({imports:[[r.Q,n.b,o.a,s.k]]}),e})()},thVn:function(e,i,t){"use strict";t.r(i),t.d(i,"UserFormPageModule",function(){return j});var n=t("ofXK"),o=t("3Pt+"),s=t("TEn/"),r=t("tyNb"),a=t("mrSG"),d=t("CbRh"),l=t("OGMK"),c=t("fXoL"),b=t("qfBg"),u=t("qZ4S"),h=t("3LUQ"),g=t("2MiI");function p(e,i){1&e&&(c.Rb(0,"h3"),c.qc(1,"Formul\xe1rio de cadastro."),c.Qb())}function f(e,i){1&e&&(c.Rb(0,"ion-text",24),c.Rb(1,"b"),c.qc(2,"Email invalido"),c.Qb(),c.Qb())}function m(e,i){1&e&&(c.Rb(0,"ion-text",24),c.Rb(1,"b"),c.qc(2,"DDD invalido"),c.Qb(),c.Qb())}function v(e,i){1&e&&(c.Rb(0,"ion-text",24),c.Rb(1,"b"),c.qc(2,"Telefone invalido"),c.Qb(),c.Qb())}function S(e,i){1&e&&(c.Rb(0,"ion-text",24),c.Rb(1,"b",25),c.qc(2," DDD e Telefone invalido"),c.Qb(),c.Qb())}function y(e,i){1&e&&(c.Rb(0,"ion-text",24),c.Rb(1,"b"),c.qc(2,"Senha curta"),c.Qb(),c.Qb())}function w(e,i){if(1&e){const e=c.Sb();c.Rb(0,"ion-item"),c.Rb(1,"ion-label",6),c.qc(2,"Senha Antiga "),c.pc(3,y,3,0,"ion-text",8),c.Qb(),c.Rb(4,"ion-input",26,27),c.Zb("ngModelChange",function(i){return c.mc(e),c.bc().loggedUser.password=i}),c.Qb(),c.Qb()}if(2&e){const e=c.lc(5),i=c.bc();c.Bb(3),c.gc("ngIf",e.invalid&&e.dirty),c.Bb(1),c.hc("minlength",i.minlength),c.gc("ngModel",i.loggedUser.password)("required",i.logged)}}function M(e,i){1&e&&(c.Rb(0,"span"),c.qc(1,"Nova "),c.Qb())}function Q(e,i){1&e&&(c.Rb(0,"ion-text",24),c.Rb(1,"b"),c.qc(2,"Senha curta"),c.Qb(),c.Qb())}function R(e,i){1&e&&(c.Rb(0,"ion-text",24),c.Rb(1,"b"),c.qc(2,"Senhas n\xe3o conferem"),c.Qb(),c.Qb())}function U(e,i){1&e&&(c.Rb(0,"span"),c.qc(1,"Cadastrar"),c.Qb())}function B(e,i){1&e&&(c.Rb(0,"span"),c.qc(1,"Atualizar"),c.Qb())}const O=function(e){return{webrowser:e}},q=[{path:"",component:(()=>{class e{constructor(e,i,t,n,o){this.userService=e,this.Validation=i,this.alertService=t,this.router=n,this.navCtrl=o,this.logged=!1,this.toBeSentUser=new d.a,this.loggedUser=new d.a,this.title="Dados da Conta",this.minlength=6,this.pword="",this.confirm=""}ngOnInit(){}ionViewWillEnter(){this.checkIfLogged(),this.GetPlataformInfo()}ionViewWillLeave(){this.toBeSentUser=new d.a,this.logged=!1,this.confirm="",this.pword="",this.ddd=null,this.number=null,this.telefone=null,this.subscription1&&!this.subscription1.closed&&this.subscription1.unsubscribe(),this.subscription2&&!this.subscription2.closed&&this.subscription2.unsubscribe()}checkIfLogged(){return Object(a.b)(this,void 0,void 0,function*(){yield this.alertService.presentLoading().then(e=>{this.loadingAlert=e}),this.subscription1&&!this.subscription1.closed&&this.subscription1.unsubscribe(),this.subscription1=l.a.GetUserInfo().subscribe(e=>Object(a.b)(this,void 0,void 0,function*(){e||(this.logged=!1,this.toBeSentUser=new d.a,this.toBeSentUser.userType=d.b.User,this.title="Novo Usu\xe1rio",yield this.alertService.dismissLoading(this.loadingAlert)),e&&(this.loggedUser=this.CreateNewUser(e),this.toBeSentUser=this.CreateNewUser(e),this.ddd=e.tel.substring(0,2),this.number=e.tel.substring(2),this.logged=!0,yield this.alertService.dismissLoading(this.loadingAlert)),this.subscription1.unsubscribe()}))})}GetPlataformInfo(){this.subscription2&&!this.subscription2.closed&&this.subscription2.unsubscribe(),this.subscription2=l.a.GetAppInfo().subscribe(e=>{this.checkScreen=e.appWidth<=l.a.maxMobileWidth,this.setFormDivWidth(.4*e.appWidth>l.a.maxMobileWidth/1.5?"40%":l.a.maxMobileWidth/1.5+"px")})}OnFormSubmit(e){return Object(a.b)(this,void 0,void 0,function*(){this.toBeSentUser.tel=this.ddd+this.number,e.valid&&(yield this.alertService.presentLoading().then(e=>{this.loadingAlert=e}),this.toBeSentUser.tel=this.ddd+this.number,this.logged?""!=this.pword&&""!=this.confirm?yield this.UpdateWithNewPassword(e):yield this.UpdateWithoutNewPassword(e):(this.toBeSentUser.password=this.pword,yield this.userService.AddUser(this.toBeSentUser).then(()=>Object(a.b)(this,void 0,void 0,function*(){yield this.successfulSubmit("Parabens","Registro efetuado com sucesso.","")}),e=>Object(a.b)(this,void 0,void 0,function*(){yield this.failedSubmit("Ocorreu um erro","Seu registro n\xe3o p\xf4de ser efetuado.")}))))})}UpdateWithNewPassword(e){return Object(a.b)(this,void 0,void 0,function*(){yield this.userService.auth.signInWithEmailAndPassword(this.loggedUser.email,this.loggedUser.password).then(i=>Object(a.b)(this,void 0,void 0,function*(){yield(yield this.userService.auth.currentUser).updatePassword(this.pword).then(()=>Object(a.b)(this,void 0,void 0,function*(){yield(yield this.userService.auth.currentUser).updateEmail(this.toBeSentUser.email).then(()=>Object(a.b)(this,void 0,void 0,function*(){this.userService.Update(this.toBeSentUser).then(()=>Object(a.b)(this,void 0,void 0,function*(){e.reset(),yield this.successfulSubmit("Sucesso!","Seu perfil foi atualizado.","/profile")}),e=>Object(a.b)(this,void 0,void 0,function*(){yield this.failedSubmit("Ocorreu um erro","Seu perfil n\xe3o p\xf4de ser atualizado. Senha e Email atualizados.")}))}),e=>Object(a.b)(this,void 0,void 0,function*(){this.UpdateError("Erro","N\xe3o foi possivel atualizar o email. Senha atualizada.")}))}),e=>Object(a.b)(this,void 0,void 0,function*(){this.UpdateError("Error","N\xe3o foi possivel atualizar a senha.")}))}),e=>Object(a.b)(this,void 0,void 0,function*(){this.UpdateError("Error","Senha Antiga n\xe3o corresponde com a conta.")}))})}UpdateWithoutNewPassword(e){return Object(a.b)(this,void 0,void 0,function*(){yield this.userService.auth.signInWithEmailAndPassword(this.loggedUser.email,this.loggedUser.password).then(i=>Object(a.b)(this,void 0,void 0,function*(){yield(yield this.userService.auth.currentUser).updateEmail(this.toBeSentUser.email).then(()=>Object(a.b)(this,void 0,void 0,function*(){this.userService.Update(this.toBeSentUser).then(()=>Object(a.b)(this,void 0,void 0,function*(){e.reset(),yield this.successfulSubmit("Sucesso!","Seu perfil foi atualizado.","/profile")}),e=>Object(a.b)(this,void 0,void 0,function*(){yield this.failedSubmit("Ocorreu um erro","Seu perfil n\xe3o p\xf4de ser atualizado. Senha e Email atualizados.")}))}),e=>Object(a.b)(this,void 0,void 0,function*(){this.UpdateError("Erro","N\xe3o foi possivel atualizar o email. Senha atualizada.")}))}),e=>Object(a.b)(this,void 0,void 0,function*(){this.UpdateError("Error","Senha Antiga n\xe3o corresponde com a conta.")}))})}UpdateError(e,i){return Object(a.b)(this,void 0,void 0,function*(){yield this.alertService.dismissLoading(this.loadingAlert),this.loggedUser.password="",yield this.alertService.presentAlert("Error","Senha Antiga n\xe3o corresponde com a conta.")})}successfulSubmit(e,i,t){return Object(a.b)(this,void 0,void 0,function*(){this.toBeSentUser=new d.a,this.loggedUser=new d.a,this.logged=!1,yield this.alertService.dismissLoading(this.loadingAlert),yield this.alertService.presentAlert(e,i),yield this.router.navigate([t])})}failedSubmit(e,i){return Object(a.b)(this,void 0,void 0,function*(){yield this.alertService.dismissLoading(this.loadingAlert),yield this.alertService.presentAlert(e,i)})}setFormDivWidth(e){document.body.style.setProperty("--maxWidth",e)}GoBack(){this.navCtrl.back(),this.navCtrl.pop()}CreateNewUser(e){var i=new d.a;return i.email=e.email,i.name=e.name,i.tel=e.tel,i.id=e.id,i}}return e.\u0275fac=function(i){return new(i||e)(c.Mb(b.a),c.Mb(u.a),c.Mb(h.a),c.Mb(r.g),c.Mb(s.U))},e.\u0275cmp=c.Gb({type:e,selectors:[["app-user-form"]],decls:52,vars:26,consts:[["segment","0",3,"title"],["title","Formul\xe1rio de cadastro","segment","1"],[3,"ngClass"],[4,"ngIf"],[3,"ngSubmit"],["form","ngForm"],["position","floating"],["type","text","name","user-name","required","","pattern","[a-zA-Z ]*",3,"ngModel","ngModelChange"],["color","danger",4,"ngIf"],["type","email","name","user-email","required","",3,"ngModel","ngModelChange"],["email","ngModel"],[2,"margin","-5px"],["size","3.5",2,"margin-right","-5px"],["type","tel","name","ddd","maxlength","2","required","",3,"ngModel","ngModelChange"],["dddvalid","ngModel"],[2,"margin-left","-5px"],["type","tel","name","number","minlength","8","maxlength","9","required","",3,"ngModel","ngModelChange"],["tel","ngModel"],["type","password","name","user-password",3,"ngModel","minlength","required","ngModelChange"],["password","ngModel"],["type","password","name","confirm",3,"ngModel","minlength","required","ngModelChange"],["confirmation","ngModel"],["expand","block","size","default","type","submit",1,"ion-margin",3,"disabled"],["expand","block","size","default","type","reset",1,"ion-margin",3,"click"],["color","danger"],[2,"font-size",".75rem"],["type","password","name","user-oldPassword",3,"ngModel","minlength","required","ngModelChange"],["oldPassword","ngModel"]],template:function(e,i){if(1&e){const e=c.Sb();c.Nb(0,"app-header",0),c.Rb(1,"ion-content"),c.Nb(2,"app-header",1),c.Rb(3,"div",2),c.pc(4,p,2,0,"h3",3),c.Rb(5,"form",4,5),c.Zb("ngSubmit",function(){c.mc(e);const t=c.lc(6);return i.OnFormSubmit(t)}),c.Rb(7,"ion-item"),c.Rb(8,"ion-label",6),c.qc(9,"Nome "),c.Qb(),c.Rb(10,"ion-input",7),c.Zb("ngModelChange",function(e){return i.toBeSentUser.name=e}),c.Qb(),c.Qb(),c.Rb(11,"ion-item"),c.Rb(12,"ion-label",6),c.qc(13,"Email "),c.pc(14,f,3,0,"ion-text",8),c.Qb(),c.Rb(15,"ion-input",9,10),c.Zb("ngModelChange",function(e){return i.toBeSentUser.email=e}),c.Qb(),c.Qb(),c.Rb(17,"ion-row",11),c.Rb(18,"ion-col",12),c.Rb(19,"ion-item"),c.Rb(20,"ion-label",6),c.qc(21,"DDD"),c.Qb(),c.Rb(22,"ion-input",13,14),c.Zb("ngModelChange",function(e){return i.ddd=e}),c.Qb(),c.Qb(),c.Qb(),c.Rb(24,"ion-col",15),c.Rb(25,"ion-item"),c.Rb(26,"ion-label",6),c.qc(27,"Telefone "),c.pc(28,m,3,0,"ion-text",8),c.pc(29,v,3,0,"ion-text",8),c.pc(30,S,3,0,"ion-text",8),c.Qb(),c.Rb(31,"ion-input",16,17),c.Zb("ngModelChange",function(e){return i.number=e}),c.Qb(),c.Qb(),c.Qb(),c.Qb(),c.pc(33,w,6,4,"ion-item",3),c.Rb(34,"ion-item"),c.Rb(35,"ion-label",6),c.pc(36,M,2,0,"span",3),c.qc(37,"Senha "),c.pc(38,Q,3,0,"ion-text",8),c.Qb(),c.Rb(39,"ion-input",18,19),c.Zb("ngModelChange",function(e){return i.pword=e}),c.Qb(),c.Qb(),c.Rb(41,"ion-item"),c.Rb(42,"ion-label",6),c.qc(43,"Confirmar Senha "),c.pc(44,R,3,0,"ion-text",8),c.Qb(),c.Rb(45,"ion-input",20,21),c.Zb("ngModelChange",function(e){return i.confirm=e}),c.Qb(),c.Qb(),c.Rb(47,"ion-button",22),c.pc(48,U,2,0,"span",3),c.pc(49,B,2,0,"span",3),c.Qb(),c.Rb(50,"ion-button",23),c.Zb("click",function(){return i.GoBack()}),c.qc(51,"Cancelar"),c.Qb(),c.Qb(),c.Qb(),c.Qb()}if(2&e){const e=c.lc(6),t=c.lc(16),n=c.lc(23),o=c.lc(32),s=c.lc(40),r=c.lc(46);c.gc("title",i.title),c.Bb(3),c.gc("ngClass",c.jc(24,O,!i.checkScreen)),c.Bb(1),c.gc("ngIf",!i.checkScreen),c.Bb(6),c.gc("ngModel",i.toBeSentUser.name),c.Bb(4),c.gc("ngIf",t.dirty&&!i.Validation.Email(t.value)),c.Bb(1),c.gc("ngModel",i.toBeSentUser.email),c.Bb(7),c.gc("ngModel",i.ddd),c.Bb(6),c.gc("ngIf",n.dirty&&!i.Validation.Ddd(n.value)&&!(o.dirty&&!i.Validation.Tel(o.value))),c.Bb(1),c.gc("ngIf",o.dirty&&!i.Validation.Tel(o.value)&&!(n.dirty&&!i.Validation.Ddd(n.value))),c.Bb(1),c.gc("ngIf",o.dirty&&!i.Validation.Tel(o.value)&&n.dirty&&!i.Validation.Ddd(n.value)),c.Bb(1),c.gc("ngModel",i.number),c.Bb(2),c.gc("ngIf",i.logged),c.Bb(3),c.gc("ngIf",i.logged),c.Bb(2),c.gc("ngIf",s.invalid&&s.dirty),c.Bb(1),c.hc("minlength",i.minlength),c.gc("ngModel",i.pword)("required",!i.logged),c.Bb(5),c.gc("ngIf",r.value!=s.value&&r.dirty),c.Bb(1),c.hc("minlength",i.minlength),c.gc("ngModel",i.confirm)("required",!i.logged),c.Bb(2),c.gc("disabled",e.invalid||r.value!=s.value||!i.Validation.Email(t.value)||!i.Validation.Tel(o.value)||!i.Validation.Ddd(n.value)),c.Bb(1),c.gc("ngIf",!i.logged),c.Bb(1),c.gc("ngIf",i.logged)}},directives:[g.a,s.m,n.i,n.k,o.l,o.g,o.h,s.s,s.u,s.r,s.ab,o.k,o.j,o.f,o.i,s.E,s.l,o.b,o.c,s.e,s.M],styles:[".webrowser[_ngcontent-%COMP%]{text-align:center;position:absolute;left:0;right:0;top:50%;transform:translateY(-50%);width:var(--maxWidth);margin:0 auto;padding-top:30px}"]}),e})()}];let x=(()=>{class e{}return e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=c.Kb({type:e}),e.\u0275inj=c.Jb({imports:[[r.k.forChild(q)],r.k]}),e})();var I=t("dagM");let j=(()=>{class e{}return e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=c.Kb({type:e}),e.\u0275inj=c.Jb({imports:[[n.b,o.a,s.Q,x,I.a]]}),e})()}}]);