(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{"2MiI":function(i,t,e){"use strict";e.d(t,"a",function(){return a});var s=e("OGMK"),n=e("fXoL"),r=e("ofXK"),o=e("TEn/");function c(i,t){if(1&i&&(n.Rb(0,"ion-header",3),n.Rb(1,"ion-toolbar"),n.Rb(2,"ion-buttons",4),n.Nb(3,"ion-menu-button"),n.Qb(),n.Rb(4,"ion-title"),n.qc(5),n.Qb(),n.Qb(),n.Qb()),2&i){const i=n.bc();n.gc("translucent",!0),n.Bb(5),n.rc(i.title)}}function b(i,t){if(1&i&&(n.Rb(0,"ion-header",5),n.Rb(1,"ion-toolbar"),n.Rb(2,"ion-title",6),n.qc(3),n.Qb(),n.Qb(),n.Qb()),2&i){const i=n.bc();n.Bb(3),n.rc(i.title)}}function l(i,t){1&i&&n.Nb(0,"div",7)}let a=(()=>{class i{constructor(){this.title="",this.isMobile=!0}ngOnInit(){this.subscription&&!this.subscription.closed&&this.subscription.unsubscribe(),this.subscription=s.a.GetAppInfo().subscribe(i=>{this.isMobile=i.appWidth<=s.a.maxMobileWidth})}ngOnDestroy(){this.subscription&&!this.subscription.closed&&this.subscription.unsubscribe()}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=n.Gb({type:i,selectors:[["app-header"]],inputs:{title:"title",segment:"segment"},decls:3,vars:3,consts:[[3,"translucent",4,"ngIf"],["collapse","condense",4,"ngIf"],["style","width: 100%; height: 65px;",4,"ngIf"],[3,"translucent"],["slot","start"],["collapse","condense"],["size","large"],[2,"width","100%","height","65px"]],template:function(i,t){1&i&&(n.pc(0,c,6,2,"ion-header",0),n.pc(1,b,4,1,"ion-header",1),n.pc(2,l,1,0,"div",2)),2&i&&(n.gc("ngIf",t.isMobile&&"0"==t.segment),n.Bb(1),n.gc("ngIf",t.isMobile&&"1"==t.segment),n.Bb(1),n.gc("ngIf",!t.isMobile&&"0"==t.segment))},directives:[r.k,o.o,o.S,o.f,o.B,o.R],styles:[""]}),i})()},dagM:function(i,t,e){"use strict";e.d(t,"a",function(){return b});var s=e("ofXK"),n=e("3Pt+"),r=e("tyNb"),o=e("TEn/"),c=e("fXoL");let b=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=c.Kb({type:i}),i.\u0275inj=c.Jb({imports:[[o.T,s.b,n.a,r.k]]}),i})()},uQSZ:function(i,t,e){"use strict";e.r(t),e.d(t,"AdvertsPageModule",function(){return w});var s=e("ofXK"),n=e("3Pt+"),r=e("TEn/"),o=e("tyNb"),c=e("mrSG"),b=e("OGMK"),l=e("fXoL"),a=e("3LUQ"),d=e("Gdn9"),u=e("4kQV"),h=e("2MiI");function p(i,t){1&i&&(l.Rb(0,"div",7),l.qc(1,"An\xfancios"),l.Qb())}function v(i,t){1&i&&(l.Rb(0,"div",8),l.qc(1,"Nenhum item encontrado."),l.Qb())}function g(i,t){if(1&i&&l.Nb(0,"img",15),2&i){const i=l.bc().$implicit;l.gc("src",i.gallery[0],l.nc)("alt",i.name)}}function f(i,t){if(1&i){const i=l.Sb();l.Rb(0,"ion-item-sliding"),l.Rb(1,"ion-item",9),l.pc(2,g,1,2,"img",10),l.Rb(3,"ion-label"),l.Rb(4,"h2"),l.qc(5),l.Rb(6,"span",11),l.qc(7),l.Qb(),l.Qb(),l.Rb(8,"h3"),l.qc(9),l.cc(10,"currency"),l.Rb(11,"span",11),l.qc(12),l.Qb(),l.Qb(),l.Rb(13,"h4"),l.qc(14),l.Qb(),l.Qb(),l.Qb(),l.Rb(15,"ion-item-options",12),l.Rb(16,"ion-item-option",13),l.Zb("click",function(){l.mc(i);const e=t.$implicit;return l.bc().DeleteAdvert(e.id)}),l.Rb(17,"span",14),l.qc(18,"Deletar"),l.Qb(),l.Qb(),l.Qb(),l.Qb()}if(2&i){const i=t.$implicit;l.Bb(1),l.ic("routerLink","/productForm/",i.id,""),l.Bb(1),l.gc("ngIf",(null==i.gallery?null:i.gallery.length)>0),l.Bb(3),l.rc(i.name),l.Bb(2),l.sc("Stock: ",i.stock,""),l.Bb(2),l.rc(l.dc(10,7,i.price,"BRL")),l.Bb(3),l.sc("Avalia\xe7\xe3o: ",i.avgReview||0==i.avgReview?i.avgReview+"%":"Nenhum",""),l.Bb(2),l.rc(i.verified?"Verificado":"N\xe3o Verificado")}}const m=function(i){return{webrowser:i}},y=[{path:"",component:(()=>{class i{constructor(i,t,e,s){this.alertService=i,this.router=t,this.productService=e,this.reviewService=s,this.adverts=[]}ngOnInit(){}ionViewWillEnter(){return Object(c.b)(this,void 0,void 0,function*(){this.GetPlataformInfo(),this.GetUserAndAdverts()})}ionViewWillLeave(){this.adverts=[],this.user=null,this.subscription1&&!this.subscription1.closed&&this.subscription1.unsubscribe(),this.subscription2&&!this.subscription2.closed&&this.subscription2.unsubscribe(),this.subscription3&&!this.subscription3.closed&&this.subscription3.unsubscribe()}GetPlataformInfo(){this.subscription1=b.a.GetAppInfo().subscribe(i=>{this.isMobile=i.appWidth<=b.a.maxMobileWidth,this.setDivWidth(.4*i.appWidth>b.a.maxMobileWidth/1.5?"40%":b.a.maxMobileWidth/1.5+"px")})}setDivWidth(i){document.body.style.setProperty("--maxWidth",i)}GetUserAndAdverts(){return Object(c.b)(this,void 0,void 0,function*(){yield this.alertService.presentLoading().then(i=>this.loadingAlertID=i),this.subscription2=b.a.GetUserInfo().subscribe(i=>Object(c.b)(this,void 0,void 0,function*(){if(!i)return yield this.router.navigate(["/login"]),void(yield this.alertService.dismissLoading(this.loadingAlertID));this.user=i,this.GetAdverts()}),i=>Object(c.b)(this,void 0,void 0,function*(){yield this.alertService.dismissLoading(this.loadingAlertID),yield this.alertService.presentAlert("Ops","Algo deu errado, tente novamente mais tarde.")}))})}GetAdverts(){return Object(c.b)(this,void 0,void 0,function*(){this.subscription3&&!this.subscription3.closed&&this.subscription3.unsubscribe(),this.subscription3=(yield this.productService.GetAllFromSeller(this.user.id)).subscribe(i=>{this.adverts=i,this.FillProductAttributes()},i=>Object(c.b)(this,void 0,void 0,function*(){yield this.alertService.dismissLoading(this.loadingAlertID),yield this.alertService.presentAlert("Ops","Algo deu errado, tente novamente mais tarde.")}))})}FillProductAttributes(){return Object(c.b)(this,void 0,void 0,function*(){var i=!0,t=[],e=0,s=this.adverts.length;if(this.adverts&&s>0)for(var n of this.adverts)n.fillSubCategory(),t.push((yield this.reviewService.GetAllFromProduct(n.id)).subscribe(t=>{n.reviews=t,n.reviews&&n.calculateAvgRating(),++e>=s&&(i=!1)},t=>Object(c.b)(this,void 0,void 0,function*(){i=!1})));else i=!1;for(;i;)yield new Promise(i=>setTimeout(i,10));for(var r of t)r.unsubscribe();yield this.alertService.dismissLoading(this.loadingAlertID)})}DeleteAdvert(i){return Object(c.b)(this,void 0,void 0,function*(){var t=!1;yield this.alertService.confirmationAlert("Deletar","Tem certeza que deseja deletar esse anuncio?").then(i=>t=i),t&&(yield this.alertService.presentLoading().then(i=>this.loadingAlertID=i),yield this.productService.DeleteCallFromUser(i,!0).then(()=>Object(c.b)(this,void 0,void 0,function*(){yield this.alertService.presentAlert("Feito!","O An\xfancio foi deletado.")})).catch(i=>{this.alertService.presentAlert("Erro","Ocorreu um erro e n\xe3o foi possivel deletar esse an\xfancio, tente novamente mais tarde.")}).finally(()=>Object(c.b)(this,void 0,void 0,function*(){yield this.alertService.dismissLoading(this.loadingAlertID)})))})}}return i.\u0275fac=function(t){return new(t||i)(l.Mb(a.a),l.Mb(o.g),l.Mb(d.a),l.Mb(u.a))},i.\u0275cmp=l.Gb({type:i,selectors:[["app-adverts"]],decls:8,vars:7,consts:[["title","An\xfancios","segment","0"],[3,"fullscreen"],["title","An\xfancios","segment","1"],[3,"ngClass"],["style","padding-bottom: .3rem;",4,"ngIf"],["style","text-align: center;",4,"ngIf"],[4,"ngFor","ngForOf"],[2,"padding-bottom",".3rem"],[2,"text-align","center"],["lines","inset",3,"routerLink"],[3,"src","alt",4,"ngIf"],[1,"ion-float-right",2,"font-size",".75rem"],["side","end"],["color","danger",3,"click"],["id","optionRight"],[3,"src","alt"]],template:function(i,t){1&i&&(l.Nb(0,"app-header",0),l.Rb(1,"ion-content",1),l.Nb(2,"app-header",2),l.Rb(3,"div",3),l.pc(4,p,2,0,"div",4),l.Rb(5,"ion-list"),l.pc(6,v,2,0,"div",5),l.pc(7,f,19,10,"ion-item-sliding",6),l.Qb(),l.Qb(),l.Qb()),2&i&&(l.Bb(1),l.gc("fullscreen",!0),l.Bb(2),l.gc("ngClass",l.jc(5,m,!t.isMobile)),l.Bb(1),l.gc("ngIf",!t.isMobile),l.Bb(2),l.gc("ngIf",!t.adverts||t.adverts&&1>t.adverts.length),l.Bb(1),l.gc("ngForOf",t.adverts))},directives:[h.a,r.m,s.i,s.k,r.y,s.j,r.w,r.s,r.bb,o.h,r.x,r.v,r.u],pipes:[s.c],styles:["img[_ngcontent-%COMP%]{border-radius:10%;height:40px;width:40px;margin:0 7px 0 0}.webrowser[_ngcontent-%COMP%]{text-align:center;width:var(--maxWidth);margin:0 auto;padding-top:1rem}#optionRight[_ngcontent-%COMP%]{margin:0 .9rem 0 1rem}"]}),i})()}];let A=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=l.Kb({type:i}),i.\u0275inj=l.Jb({imports:[[o.k.forChild(y)],o.k]}),i})();var R=e("dagM");let w=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=l.Kb({type:i}),i.\u0275inj=l.Jb({imports:[[s.b,n.a,r.T,A,R.a]]}),i})()}}]);