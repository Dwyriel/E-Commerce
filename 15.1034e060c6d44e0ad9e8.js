(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{"2MiI":function(i,t,e){"use strict";e.d(t,"a",function(){return l});var n=e("OGMK"),s=e("fXoL"),o=e("ofXK"),r=e("TEn/");function c(i,t){if(1&i&&(s.Rb(0,"ion-header",3),s.Rb(1,"ion-toolbar"),s.Rb(2,"ion-buttons",4),s.Nb(3,"ion-menu-button"),s.Qb(),s.Rb(4,"ion-title"),s.rc(5),s.Qb(),s.Qb(),s.Qb()),2&i){const i=s.bc();s.hc("translucent",!0),s.Bb(5),s.sc(i.title)}}function a(i,t){if(1&i&&(s.Rb(0,"ion-header",5),s.Rb(1,"ion-toolbar"),s.Rb(2,"ion-title",6),s.rc(3),s.Qb(),s.Qb(),s.Qb()),2&i){const i=s.bc();s.Bb(3),s.sc(i.title)}}function b(i,t){1&i&&s.Nb(0,"div",7)}let l=(()=>{class i{constructor(){this.title="",this.isMobile=!0}ngOnInit(){this.subscription&&!this.subscription.closed&&this.subscription.unsubscribe(),this.subscription=n.a.GetAppInfo().subscribe(i=>{this.isMobile=i.appWidth<=n.a.maxMobileWidth})}ngOnDestroy(){this.subscription&&!this.subscription.closed&&this.subscription.unsubscribe()}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=s.Gb({type:i,selectors:[["app-header"]],inputs:{title:"title",segment:"segment"},decls:3,vars:3,consts:[[3,"translucent",4,"ngIf"],["collapse","condense",4,"ngIf"],["style","width: 100%; height: 65px;",4,"ngIf"],[3,"translucent"],["slot","start"],["collapse","condense"],["size","large"],[2,"width","100%","height","65px"]],template:function(i,t){1&i&&(s.qc(0,c,6,2,"ion-header",0),s.qc(1,a,4,1,"ion-header",1),s.qc(2,b,1,0,"div",2)),2&i&&(s.hc("ngIf",t.isMobile&&"0"==t.segment),s.Bb(1),s.hc("ngIf",t.isMobile&&"1"==t.segment),s.Bb(1),s.hc("ngIf",!t.isMobile&&"0"==t.segment))},directives:[o.k,r.o,r.T,r.f,r.B,r.S],styles:[""]}),i})()},Qios:function(i,t,e){"use strict";e.r(t),e.d(t,"AdminUsersPageModule",function(){return U});var n=e("ofXK"),s=e("3Pt+"),o=e("TEn/"),r=e("tyNb"),c=e("mrSG"),a=e("ytin"),b=e("OGMK"),l=e("CbRh"),u=e("fXoL"),h=e("3LUQ"),d=e("qfBg"),p=e("2MiI");function g(i,t){1&i&&(u.Rb(0,"div",8),u.rc(1,"ADM - Usu\xe1rios"),u.Qb())}function f(i,t){if(1&i){const i=u.Sb();u.Rb(0,"ion-row",9),u.Rb(1,"ion-col",10),u.Rb(2,"ion-searchbar",11),u.Zb("ionInput",function(t){return u.nc(i),u.bc().HandleSearchbarInput(t)}),u.Qb(),u.Qb(),u.Rb(3,"ion-col",12),u.Rb(4,"ion-select",13),u.Zb("ngModelChange",function(t){return u.nc(i),u.bc().sorting=t})("ngModelChange",function(){return u.nc(i),u.bc().sortListing()}),u.Rb(5,"ion-select-option",14),u.rc(6,"Todos"),u.Qb(),u.Rb(7,"ion-select-option",14),u.rc(8,"Ativos"),u.Qb(),u.Rb(9,"ion-select-option",14),u.rc(10,"Desativos"),u.Qb(),u.Qb(),u.Qb(),u.Qb()}if(2&i){const i=u.bc();u.Bb(4),u.hc("ngModel",i.sorting),u.Bb(1),u.hc("value",0),u.Bb(2),u.hc("value",1),u.Bb(2),u.hc("value",2)}}function v(i,t){1&i&&(u.Rb(0,"div",15),u.rc(1,"Nenhum item encontrado."),u.Qb())}function m(i,t){if(1&i){const i=u.Sb();u.Rb(0,"ion-item-options",24),u.Rb(1,"ion-item-option",25),u.Zb("click",function(){u.nc(i);const t=u.bc(2).$implicit;return u.bc().ChangeType(t.user)}),u.Rb(2,"span",26),u.rc(3,"Privil\xe9gio"),u.Qb(),u.Qb(),u.Qb()}}function y(i,t){if(1&i){const i=u.Sb();u.Rb(0,"ion-item",27),u.Zb("click",function(t){u.nc(i);const e=u.bc(2).$implicit;return u.bc().ChangeActive(e.user),t.stopPropagation()}),u.Rb(1,"span"),u.rc(2),u.Qb(),u.Qb()}if(2&i){const i=u.bc(2).$implicit;u.Bb(2),u.sc(i.user.active?"Desativar":"Ativar")}}function I(i,t){if(1&i){const i=u.Sb();u.Rb(0,"ion-item",28),u.Zb("click",function(t){u.nc(i);const e=u.bc(2).$implicit;return u.bc().ChangeType(e.user),t.stopPropagation()}),u.Rb(1,"span"),u.rc(2,"Privil\xe9gio"),u.Qb(),u.Qb()}}function S(i,t){if(1&i){const i=u.Sb();u.Rb(0,"ion-item-options",29),u.Rb(1,"ion-item-option",25),u.Zb("click",function(){u.nc(i);const t=u.bc(2).$implicit;return u.bc().ChangeActive(t.user)}),u.Rb(2,"span",30),u.rc(3),u.Qb(),u.Qb(),u.Qb()}if(2&i){const i=u.bc(2).$implicit;u.Bb(3),u.sc(i.user.active?"Desativar":"Ativar")}}function w(i,t){if(1&i){const i=u.Sb();u.Pb(0),u.qc(1,m,4,0,"ion-item-options",17),u.Rb(2,"ion-item",18),u.Zb("click",function(){u.nc(i);const t=u.bc().$implicit;return u.bc().ShowUser(t.user)}),u.Nb(3,"img",19),u.Rb(4,"ion-label"),u.Rb(5,"h2"),u.rc(6),u.Rb(7,"span",20),u.rc(8),u.Qb(),u.Qb(),u.Rb(9,"h3"),u.rc(10),u.Rb(11,"span",20),u.rc(12),u.Qb(),u.Qb(),u.Qb(),u.qc(13,y,3,1,"ion-item",21),u.qc(14,I,3,0,"ion-item",22),u.Qb(),u.qc(15,S,4,1,"ion-item-options",23),u.Ob()}if(2&i){const i=u.bc().$implicit,t=u.bc();u.Bb(1),u.hc("ngIf",t.isMobile),u.Bb(2),u.hc("src",i.user.photo?i.user.photo:"assets/perfil.png",u.oc)("alt",i.user.name),u.Bb(3),u.sc(i.user.name),u.Bb(2),u.tc("Status: ",i.user.active?"Ativo":"Desativo",""),u.Bb(2),u.sc(i.user.email),u.Bb(2),u.tc("Privil\xe9gio: ",0==i.user.userType?"Admin":"Usu\xe1rio",""),u.Bb(1),u.hc("ngIf",!t.isMobile),u.Bb(1),u.hc("ngIf",!t.isMobile),u.Bb(1),u.hc("ngIf",t.isMobile)}}function A(i,t){if(1&i&&(u.Rb(0,"ion-item-sliding"),u.qc(1,w,16,10,"ng-container",16),u.Qb()),2&i){const i=t.$implicit;u.Bb(1),u.hc("ngIf",i.shouldShow)}}const M=function(i){return{webrowser:i}},R=[{path:"",component:(()=>{class i{constructor(i,t,e,n){this.alertService=i,this.router=t,this.userService=e,this.popoverController=n,this.isLoading=!0,this.cachedUsers=[],this.users=[],this.sorting=0}ngOnInit(){}ionViewWillEnter(){return Object(c.b)(this,void 0,void 0,function*(){this.isLoading=!0,this.GetPlataformInfo(),this.GetUser()})}ionViewWillLeave(){this.user=null,this.users=[],this.cachedUsers=[],this.sorting=0,this.subscription1&&!this.subscription1.closed&&this.subscription1.unsubscribe(),this.subscription2&&!this.subscription2.closed&&this.subscription2.unsubscribe(),this.subscription3&&!this.subscription3.closed&&this.subscription3.unsubscribe()}GetPlataformInfo(){this.subscription1=b.a.GetAppInfo().subscribe(i=>{this.isMobile=i.appWidth<=b.a.maxMobileWidth,this.setDivWidth(.4*i.appWidth>b.a.maxMobileWidth/1.5?"40%":b.a.maxMobileWidth/1.5+"px")})}setDivWidth(i){document.body.style.setProperty("--maxWidth",i)}GetUser(){return Object(c.b)(this,void 0,void 0,function*(){yield this.alertService.presentLoading().then(i=>this.loadingAlertID=i),this.subscription2=b.a.GetUserInfo().subscribe(i=>Object(c.b)(this,void 0,void 0,function*(){return i?i.userType!=l.c.Admin?(yield this.router.navigate(["/"]),void(yield this.alertService.dismissLoading(this.loadingAlertID))):(this.user=i,void this.GetUsers()):(yield this.router.navigate(["/login"]),void(yield this.alertService.dismissLoading(this.loadingAlertID)))}),i=>Object(c.b)(this,void 0,void 0,function*(){yield this.alertService.dismissLoading(this.loadingAlertID),yield this.alertService.presentAlert("Ops","Algo deu errado, tente novamente mais tarde.")}))})}GetUsers(){return Object(c.b)(this,void 0,void 0,function*(){this.subscription3&&!this.subscription3.closed&&this.subscription3.unsubscribe(),this.subscription3=(yield this.userService.GetAll()).subscribe(i=>Object(c.b)(this,void 0,void 0,function*(){this.cachedUsers=i,this.sortListing(),this.isLoading&&(this.isLoading=!1,yield this.alertService.dismissLoading(this.loadingAlertID))}),i=>Object(c.b)(this,void 0,void 0,function*(){yield this.alertService.dismissLoading(this.loadingAlertID),yield this.alertService.presentAlert("Ops","Algo deu errado, tente novamente mais tarde.")}))})}ShowUser(i){return Object(c.b)(this,void 0,void 0,function*(){var t=yield this.popoverController.create({component:a.a,mode:"md",componentProps:{user:i},animated:!0});yield t.present()})}ChangeActive(i){return Object(c.b)(this,void 0,void 0,function*(){var t;yield this.alertService.confirmationAlert(i.active?"Desativar":"Ativar",`Deseja realmente ${i.active?"desativar":"ativar"} esse usuario?`).then(i=>t=i),t&&(yield this.alertService.presentLoading().then(i=>this.loadingAlertID=i),this.userService.UpdateActive(i.id,!i.active).then(()=>Object(c.b)(this,void 0,void 0,function*(){yield this.alertService.ShowToast("Usu\xe1rio foi "+(i.active?"desativado":"ativado"))})).catch(i=>Object(c.b)(this,void 0,void 0,function*(){yield this.alertService.ShowToast("Ocorreu um erro, tente novamente")})).finally(()=>Object(c.b)(this,void 0,void 0,function*(){yield this.alertService.dismissLoading(this.loadingAlertID)})))})}ChangeType(i){return Object(c.b)(this,void 0,void 0,function*(){var t;yield this.alertService.confirmationAlert("Privil\xe9gio",`Deseja realmente mudar os privil\xe9gios desse usuario para ${i.userType==l.c.Admin?"'Usu\xe1rio'":"'Admin'"}?`).then(i=>t=i),t&&(yield this.alertService.presentLoading().then(i=>this.loadingAlertID=i),this.userService.UpdateType(i.id,i.userType==l.c.Admin?l.c.User:l.c.Admin).then(()=>Object(c.b)(this,void 0,void 0,function*(){yield this.alertService.ShowToast("Privil\xe9gio alterado para "+(i.userType==l.c.Admin?"'Usu\xe1rio'":"'Admin'"))})).catch(i=>Object(c.b)(this,void 0,void 0,function*(){yield this.alertService.ShowToast("Ocorreu um erro, tente novamente")})).finally(()=>Object(c.b)(this,void 0,void 0,function*(){yield this.alertService.dismissLoading(this.loadingAlertID)})))})}HandleSearchbarInput(i){var t=i.target.value.toLowerCase();for(let e of this.users)e.shouldShow=e.user.name.toLowerCase().includes(t)}sortListing(){switch(this.users=[],this.sorting){case 0:this.cachedUsers.forEach(i=>{this.users.push({user:i,shouldShow:!0})});break;case 1:for(let i of this.cachedUsers)i.active&&this.users.push({user:i,shouldShow:!0});break;case 2:for(let i of this.cachedUsers)i.active||this.users.push({user:i,shouldShow:!0})}}}return i.\u0275fac=function(t){return new(t||i)(u.Mb(h.a),u.Mb(r.g),u.Mb(d.a),u.Mb(o.bb))},i.\u0275cmp=u.Gb({type:i,selectors:[["app-admin-users"]],decls:9,vars:8,consts:[["title","ADM - Usu\xe1rios","segment","0"],[3,"fullscreen"],["title","ADM - Usu\xe1rios","segment","1"],[3,"ngClass"],["style","padding-bottom: .3rem;",4,"ngIf"],["class","ion-align-items-center",4,"ngIf"],["style","text-align: center;",4,"ngIf"],[4,"ngFor","ngForOf"],[2,"padding-bottom",".3rem"],[1,"ion-align-items-center"],["size","9",2,"text-align","left"],["placeholder","Procurar",3,"ionInput"],[2,"text-align","right"],["name","sort","interface","popover","placeholder","Ordenar","value","0",3,"ngModel","ngModelChange"],[3,"value"],[2,"text-align","center"],[4,"ngIf"],["side","start",4,"ngIf"],["lines","inset","button","",3,"click"],[3,"src","alt"],[1,"ion-float-right",2,"font-size",".75rem"],["button","","color","warning","class","ion-margin",3,"click",4,"ngIf"],["button","","color","warning",3,"click",4,"ngIf"],["side","end",4,"ngIf"],["side","start"],["color","warning",3,"click"],["id","optionLeft"],["button","","color","warning",1,"ion-margin",3,"click"],["button","","color","warning",3,"click"],["side","end"],["id","optionRight"]],template:function(i,t){1&i&&(u.Nb(0,"app-header",0),u.Rb(1,"ion-content",1),u.Nb(2,"app-header",2),u.Rb(3,"div",3),u.qc(4,g,2,0,"div",4),u.Rb(5,"ion-list"),u.qc(6,f,11,4,"ion-row",5),u.qc(7,v,2,0,"div",6),u.qc(8,A,2,1,"ion-item-sliding",7),u.Qb(),u.Qb(),u.Qb()),2&i&&(u.Bb(1),u.hc("fullscreen",!0),u.Bb(2),u.hc("ngClass",u.kc(6,M,!t.isMobile)),u.Bb(1),u.hc("ngIf",!t.isMobile),u.Bb(2),u.hc("ngIf",t.cachedUsers&&t.cachedUsers.length>0),u.Bb(1),u.hc("ngIf",!t.users||t.users&&1>t.users.length),u.Bb(1),u.hc("ngForOf",t.users))},directives:[p.a,o.m,n.i,n.k,o.y,n.j,o.H,o.l,o.I,o.eb,o.L,o.db,s.f,s.i,o.M,o.w,o.s,o.x,o.v,o.u],styles:["img[_ngcontent-%COMP%]{border-radius:50%;height:40px;width:40px;margin:0 7px 0 0}.webrowser[_ngcontent-%COMP%]{text-align:center;width:var(--maxWidth);margin:0 auto;padding-top:1rem}#optionRight[_ngcontent-%COMP%]{margin:0 .9rem 0 1rem}#optionLeft[_ngcontent-%COMP%]{margin:0 1rem 0 .9rem}"]}),i})()}];let Q=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=u.Kb({type:i}),i.\u0275inj=u.Jb({imports:[[r.k.forChild(R)],r.k]}),i})();var O=e("dagM");let U=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=u.Kb({type:i}),i.\u0275inj=u.Jb({imports:[[n.b,s.a,o.U,Q,O.a]]}),i})()},dagM:function(i,t,e){"use strict";e.d(t,"a",function(){return a});var n=e("ofXK"),s=e("3Pt+"),o=e("tyNb"),r=e("TEn/"),c=e("fXoL");let a=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=c.Kb({type:i}),i.\u0275inj=c.Jb({imports:[[r.U,n.b,s.a,o.k]]}),i})()}}]);