(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{"/O0G":function(i,t,e){"use strict";e.r(t),e.d(t,"ProfilePageModule",function(){return q});var s=e("ofXK"),o=e("3Pt+"),n=e("TEn/"),r=e("tyNb"),c=e("mrSG"),d=e("OGMK"),b=e("CbRh"),l=e("fXoL"),a=e("qfBg"),u=e("mnRn"),g=e("3LUQ"),h=e("xRcl"),p=e("2MiI");function f(i,t){if(1&i&&l.Nb(0,"img",9),2&i){const i=l.bc();l.gc("src",i.user.photo,l.nc)}}function m(i,t){if(1&i){const i=l.Sb();l.Rb(0,"img",10),l.Zb("click",function(){return l.mc(i),l.bc().alterPhoto()}),l.Qb()}if(2&i){const i=l.bc();l.gc("src",i.user.photo,l.nc)}}function v(i,t){1&i&&l.Nb(0,"img",11)}function y(i,t){if(1&i){const i=l.Sb();l.Rb(0,"img",12),l.Zb("click",function(){return l.mc(i),l.bc().alterPhoto()}),l.Qb()}}function I(i,t){if(1&i&&(l.Rb(0,"ion-item-group"),l.Rb(1,"ion-item"),l.Rb(2,"ion-label"),l.qc(3,"State:"),l.Qb(),l.Rb(4,"ion-text"),l.qc(5),l.Qb(),l.Qb(),l.Rb(6,"ion-item"),l.Rb(7,"ion-label"),l.qc(8,"City:"),l.Qb(),l.Rb(9,"ion-text"),l.qc(10),l.Qb(),l.Qb(),l.Rb(11,"ion-item"),l.Rb(12,"ion-label"),l.qc(13,"CEP: "),l.Qb(),l.Rb(14,"ion-text"),l.qc(15),l.Qb(),l.Qb(),l.Rb(16,"ion-item"),l.Rb(17,"ion-label"),l.qc(18,"Address:"),l.Qb(),l.Rb(19,"ion-text"),l.qc(20),l.Qb(),l.Qb(),l.Qb()),2&i){const i=l.bc();l.Bb(5),l.rc(i.user.address.state),l.Bb(5),l.rc(i.user.address.city),l.Bb(5),l.rc(i.user.address.cep),l.Bb(5),l.tc("",i.user.address.street,", ",i.user.address.number,"")}}function R(i,t){1&i&&(l.Rb(0,"span"),l.qc(1,"Add address"),l.Qb())}function Q(i,t){1&i&&(l.Rb(0,"span"),l.qc(1,"Update address"),l.Qb())}function U(i,t){1&i&&(l.Rb(0,"ion-button",16),l.qc(1,"Edit"),l.Qb())}function x(i,t){if(1&i){const i=l.Sb();l.Rb(0,"ion-button",17),l.Zb("click",function(){return l.mc(i),l.bc(2).logout()}),l.qc(1,"Logout"),l.Qb()}}function P(i,t){if(1&i&&(l.Rb(0,"div"),l.Rb(1,"ion-button",13),l.pc(2,R,2,0,"span",8),l.pc(3,Q,2,0,"span",8),l.Qb(),l.pc(4,U,2,0,"ion-button",14),l.pc(5,x,2,0,"ion-button",15),l.Qb()),2&i){const i=l.bc();l.Bb(2),l.gc("ngIf",!i.user.address&&(!i.id||i.loggedUser&&i.id==i.loggedUser.id)),l.Bb(1),l.gc("ngIf",i.user.address&&(!i.id||i.loggedUser&&i.id==i.loggedUser.id)),l.Bb(1),l.gc("ngIf",!i.id||i.loggedUser&&i.id==i.loggedUser.id),l.Bb(1),l.gc("ngIf",!i.id||i.loggedUser&&i.id==i.loggedUser.id)}}const B=function(i){return{webrowser:i}},S=[{path:"",component:(()=>{class i{constructor(i,t,e,s,o,n){this.activatedRoute=i,this.userService=t,this.imageService=e,this.router=s,this.alertService=o,this.addressService=n,this.title="Perfil",this.user=new b.a,this.loggedUser=null,this.telephone="",this.showButtons=!1}ngOnInit(){}ionViewWillEnter(){return Object(c.b)(this,void 0,void 0,function*(){yield this.getUser(),this.GetPlataformInfo()})}ionViewWillLeave(){this.user=new b.a,this.loggedUser=null,this.telephone="",this.showButtons=!1,this.id=null,this.subscription1&&!this.subscription1.closed&&this.subscription1.unsubscribe(),this.subscription2&&!this.subscription2.closed&&this.subscription2.unsubscribe(),this.subscription3&&!this.subscription3.closed&&this.subscription3.unsubscribe(),this.subscription4&&!this.subscription4.closed&&this.subscription4.unsubscribe(),this.subscription5&&!this.subscription5.closed&&this.subscription5.unsubscribe()}GetPlataformInfo(){this.subscription5=d.a.GetAppInfo().subscribe(i=>{this.isMobile=i.appWidth<=d.a.maxMobileWidth,this.setDivWidth(.4*i.appWidth>d.a.maxMobileWidth/1.5?"40%":d.a.maxMobileWidth/1.5+"px")})}setDivWidth(i){document.body.style.setProperty("--maxWidth",i)}getUser(){return Object(c.b)(this,void 0,void 0,function*(){var i=!0;if(yield this.alertService.presentLoading().then(i=>this.loadingPopupID=i),this.id=this.activatedRoute.snapshot.paramMap.get("id"),this.id&&(this.subscription1=(yield this.userService.Get(this.id)).subscribe(t=>Object(c.b)(this,void 0,void 0,function*(){this.user=t,this.telephone=this.GetUITel(t.tel),this.title=`Perfil de ${t.name}`,t.addressId?this.subscription2=(yield this.addressService.Get(t.addressId)).subscribe(t=>Object(c.b)(this,void 0,void 0,function*(){this.user.address=t,i=!1})):i=!1}),t=>Object(c.b)(this,void 0,void 0,function*(){i=!1}))),this.id)for(;i;)yield new Promise(i=>setTimeout(i,10));this.subscription3=d.a.GetUserInfo().subscribe(i=>Object(c.b)(this,void 0,void 0,function*(){i&&(this.loggedUser=i,this.loggedUser.id=i.id,this.id||(this.user=i,this.title=`Perfil de ${i.name}`,this.telephone=this.GetUITel(i.tel),i.addressId&&(this.subscription4=(yield this.addressService.Get(i.addressId)).subscribe(i=>this.user.address=i))),yield this.alertService.dismissLoading(this.loadingPopupID)),this.id||i||(yield this.alertService.dismissLoading(this.loadingPopupID),yield this.router.navigate(["/"])),this.id&&!i&&(yield this.alertService.dismissLoading(this.loadingPopupID)),this.showButtons=!(this.id&&(!this.loggedUser||this.id!=this.loggedUser.id))}),i=>Object(c.b)(this,void 0,void 0,function*(){yield this.alertService.dismissLoading(this.loadingPopupID),this.loggedUser=null,this.id||(yield this.router.navigate(["/"]))}))})}alterPhoto(){return Object(c.b)(this,void 0,void 0,function*(){yield this.imageService.getImage().then(i=>Object(c.b)(this,void 0,void 0,function*(){yield this.alertService.presentLoading().then(i=>this.loadingPopupID=i),i?yield this.userService.UpdatePhoto(this.user.id,i).then(()=>Object(c.b)(this,void 0,void 0,function*(){this.user.photo=i,yield this.alertService.dismissLoading(this.loadingPopupID)})):yield this.alertService.dismissLoading(this.loadingPopupID)}))})}logout(){return Object(c.b)(this,void 0,void 0,function*(){yield this.alertService.presentLoading(),yield this.userService.auth.signOut().then(()=>Object(c.b)(this,void 0,void 0,function*(){yield this.alertService.dismissLoading(),yield this.router.navigate(["/"])}))})}GetUITel(i){var t,e,s=i.substring(0,2),o=i.substring(2),n=o.length;return 9===n&&(t=o.substring(0,5),e=o.substring(5)),8===n&&(t=o.substring(0,4),e=o.substring(4)),`(${s}) ${t}-${e}`}}return i.\u0275fac=function(t){return new(t||i)(l.Mb(r.a),l.Mb(a.a),l.Mb(u.a),l.Mb(r.g),l.Mb(g.a),l.Mb(h.a))},i.\u0275cmp=l.Gb({type:i,selectors:[["app-profile"]],decls:27,vars:15,consts:[["segment","0",3,"title"],[3,"fullscreen"],["segment","1",3,"title"],[3,"ngClass"],[3,"src",4,"ngIf"],[3,"src","click",4,"ngIf"],["src","assets/perfil.png",4,"ngIf"],["src","assets/perfil.png",3,"click",4,"ngIf"],[4,"ngIf"],[3,"src"],[3,"src","click"],["src","assets/perfil.png"],["src","assets/perfil.png",3,"click"],["type","button","color","primary","expand","block","routerLink","/addressForm",1,"ion-margin"],["type","button","color","primary","expand","block","routerLink","/account","class","ion-margin",4,"ngIf"],["type","button","color","secondary","expand","block","class","ion-margin",3,"click",4,"ngIf"],["type","button","color","primary","expand","block","routerLink","/account",1,"ion-margin"],["type","button","color","secondary","expand","block",1,"ion-margin",3,"click"]],template:function(i,t){1&i&&(l.Nb(0,"app-header",0),l.Rb(1,"ion-content",1),l.Nb(2,"app-header",2),l.Rb(3,"div",3),l.Rb(4,"ion-list"),l.Rb(5,"ion-item"),l.pc(6,f,1,1,"img",4),l.pc(7,m,1,1,"img",5),l.pc(8,v,1,0,"img",6),l.pc(9,y,1,0,"img",7),l.Qb(),l.Rb(10,"ion-item"),l.Rb(11,"ion-label"),l.qc(12,"Name"),l.Qb(),l.Rb(13,"ion-text"),l.qc(14),l.Qb(),l.Qb(),l.Rb(15,"ion-item"),l.Rb(16,"ion-label"),l.qc(17,"E-mail"),l.Qb(),l.Rb(18,"ion-text"),l.qc(19),l.Qb(),l.Qb(),l.Rb(20,"ion-item"),l.Rb(21,"ion-label"),l.qc(22,"Tel"),l.Qb(),l.Rb(23,"ion-text"),l.qc(24),l.Qb(),l.Qb(),l.Qb(),l.pc(25,I,21,5,"ion-item-group",8),l.pc(26,P,6,4,"div",8),l.Qb(),l.Qb()),2&i&&(l.gc("title",t.title),l.Bb(1),l.gc("fullscreen",!0),l.Bb(1),l.gc("title",t.title),l.Bb(1),l.gc("ngClass",l.jc(13,B,!t.isMobile)),l.Bb(3),l.gc("ngIf",t.user.photo&&t.id&&(t.loggedUser&&t.loggedUser.id!=t.id||!t.loggedUser)),l.Bb(1),l.gc("ngIf",t.user.photo&&(t.loggedUser&&t.loggedUser.id==t.id||!t.id)),l.Bb(1),l.gc("ngIf",!t.user.photo&&t.id&&t.loggedUser&&t.loggedUser.id!=t.id),l.Bb(1),l.gc("ngIf",!t.user.photo&&(t.loggedUser&&t.loggedUser.id==t.id||!t.id)),l.Bb(5),l.rc(t.user.name),l.Bb(5),l.rc(t.user.email),l.Bb(5),l.rc(t.telephone),l.Bb(1),l.gc("ngIf",t.user.addressId&&t.user.address),l.Bb(1),l.gc("ngIf",t.showButtons))},directives:[p.a,n.m,s.i,n.y,n.s,s.k,n.x,n.P,n.t,n.e,n.bb,r.h],styles:["img[_ngcontent-%COMP%]{border-radius:50%;height:120px;width:120px;margin:5px auto 15px}.webrowser[_ngcontent-%COMP%]{text-align:center;position:absolute;left:0;right:0;top:50%;transform:translateY(-50%);width:var(--maxWidth);margin:0 auto;padding-top:30px}"]}),i})()}];let w=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=l.Kb({type:i}),i.\u0275inj=l.Jb({imports:[[r.k.forChild(S)],r.k]}),i})();var k=e("dagM");let q=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=l.Kb({type:i}),i.\u0275inj=l.Jb({imports:[[s.b,o.a,n.T,w,k.a]]}),i})()}}]);